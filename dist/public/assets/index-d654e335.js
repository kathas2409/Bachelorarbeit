import{$ as ct,a as Zi,g as Ir,b as Pl,d as Be,m as ti,e as en,f as ut,i as oe,c as Q,h as uo,j as Rt,t as de,S as El,M as es,F as co,D as ho,k as En,s as or,l as vr,P as Il,n as fo}from"./index-ed59be3b.js";const Rr=Symbol("store-raw"),At=Symbol("store-node"),Je=Symbol("store-has"),po=Symbol("store-self");function mo(e){let t=e[ct];if(!t&&(Object.defineProperty(e,ct,{value:t=new Proxy(e,Tl)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function et(e){let t;return e!=null&&typeof e=="object"&&(e[ct]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Tt(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[Rr])return n;if(!et(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)i=e[o],(r=Tt(i,t))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,u=o.length;l<u;l++)s=o[l],!a[s].get&&(i=e[s],(r=Tt(i,t))!==i&&(e[s]=r))}return e}function Ln(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function tn(e,t,n){if(e[t])return e[t];const[r,i]=Be(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function vl(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ct||t===At||(delete n.value,delete n.writable,n.get=()=>e[ct][t]),n}function go(e){Ir()&&tn(Ln(e,At),po)()}function Rl(e){return go(e),Reflect.ownKeys(e)}const Tl={get(e,t,n){if(t===Rr)return e;if(t===ct)return n;if(t===Zi)return go(e),n;const r=Ln(e,At),i=r[t];let s=i?i():e[t];if(t===At||t===Je||t==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(e,t);Ir()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(s=tn(r,t,s)())}return et(s)?mo(s):s},has(e,t){return t===Rr||t===ct||t===Zi||t===At||t===Je||t==="__proto__"?!0:(Ir()&&tn(Ln(e,Je),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Rl,getOwnPropertyDescriptor:vl};function Ee(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;n===void 0?(delete e[t],e[Je]&&e[Je][t]&&i!==void 0&&e[Je][t].$()):(e[t]=n,e[Je]&&e[Je][t]&&i===void 0&&e[Je][t].$());let o=Ln(e,At),a;if((a=tn(o,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(a=o[l])&&a.$();(a=tn(o,"length",s))&&a.$(e.length)}(a=o[po])&&a.$()}function yo(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];Ee(e,i,t[i])}}function Ol(e,t){if(typeof t=="function"&&(t=t(e)),t=Tt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&Ee(e,n,i)}Ee(e,"length",r)}else yo(e,t)}function Ut(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Ut(e,[r[l]].concat(t),n);return}else if(a&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Ut(e,[l].concat(t),n);return}else if(a&&o==="object"){const{from:l=0,to:u=e.length-1,by:c=1}=r;for(let h=l;h<=u;h+=c)Ut(e,[h].concat(t),n);return}else if(t.length>1){Ut(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=Tt(s),r===void 0||et(i)&&et(s)&&!Array.isArray(s)?yo(i,s):Ee(e,r,s))}function $l(...[e,t]){const n=Tt(e||{}),r=Array.isArray(n),i=mo(n);function s(...o){Pl(()=>{r&&o.length===1?Ol(n,o[0]):Ut(n,o)})}return[i,s]}const Tr=Symbol("store-root");function _t(e,t,n,r,i){const s=t[n];if(e===s)return;const o=Array.isArray(e);if(n!==Tr&&(!et(e)||!et(s)||o!==Array.isArray(s)||i&&e[i]!==s[i])){Ee(t,n,e);return}if(o){if(e.length&&s.length&&(!r||i&&e[0]&&e[0][i]!=null)){let u,c,h,d,f,y,b,P;for(h=0,d=Math.min(s.length,e.length);h<d&&(s[h]===e[h]||i&&s[h]&&e[h]&&s[h][i]===e[h][i]);h++)_t(e[h],s,h,r,i);const g=new Array(e.length),_=new Map;for(d=s.length-1,f=e.length-1;d>=h&&f>=h&&(s[d]===e[f]||i&&s[d]&&e[f]&&s[d][i]===e[f][i]);d--,f--)g[f]=s[d];if(h>f||h>d){for(c=h;c<=f;c++)Ee(s,c,e[c]);for(;c<e.length;c++)Ee(s,c,g[c]),_t(e[c],s,c,r,i);s.length>e.length&&Ee(s,"length",e.length);return}for(b=new Array(f+1),c=f;c>=h;c--)y=e[c],P=i&&y?y[i]:y,u=_.get(P),b[c]=u===void 0?-1:u,_.set(P,c);for(u=h;u<=d;u++)y=s[u],P=i&&y?y[i]:y,c=_.get(P),c!==void 0&&c!==-1&&(g[c]=s[u],c=b[c],_.set(P,c));for(c=h;c<e.length;c++)c in g?(Ee(s,c,g[c]),_t(e[c],s,c,r,i)):Ee(s,c,e[c])}else for(let u=0,c=e.length;u<c;u++)_t(e[u],s,u,r,i);s.length>e.length&&Ee(s,"length",e.length);return}const a=Object.keys(e);for(let u=0,c=a.length;u<c;u++)_t(e[a[u]],s,a[u],r,i);const l=Object.keys(s);for(let u=0,c=l.length;u<c;u++)e[l[u]]===void 0&&Ee(s,l[u],void 0)}function Fl(e,t={}){const{merge:n,key:r="id"}=t,i=Tt(e);return s=>{if(!et(s)||!et(i))return i;const o=_t(i,{[Tr]:s},Tr,n,r);return o===void 0?s:o}}const Ml={};function Ll(e,t){const n=t||Ml,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return wo(e,r,i)}function wo(e,t,n){if(Dl(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ts(e.children,t,n)}return Array.isArray(e)?ts(e,t,n):""}function ts(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=wo(e[i],t,n);return r.join("")}function Dl(e){return!!(e&&typeof e=="object")}const ns=document.createElement("i");function ni(e){const t="&"+e+";";ns.innerHTML=t;const n=ns.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ue(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Ie(e,t){return e.length>0?(Ue(e,e.length,0,t),e):t}const rs={}.hasOwnProperty;function Nl(e){const t={};let n=-1;for(;++n<e.length;)Bl(t,e[n]);return t}function Bl(e,t){let n;for(n in t){const i=(rs.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){rs.call(i,o)||(i[o]=[]);const a=s[o];zl(i[o],Array.isArray(a)?a:a?[a]:[])}}}function zl(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ue(e,0,0,r)}function bo(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Pt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ze=tt(/[A-Za-z]/),Ae=tt(/[\dA-Za-z]/),jl=tt(/[#-'*+\--9=?A-Z^-~]/);function Or(e){return e!==null&&(e<32||e===127)}const $r=tt(/\d/),Ul=tt(/[\dA-Fa-f]/),Hl=tt(/[!-/:-@[-`{-~]/);function D(e){return e!==null&&e<-2}function ye(e){return e!==null&&(e<0||e===32)}function V(e){return e===-2||e===-1||e===32}const Vl=tt(/\p{P}|\p{S}/u),ql=tt(/\s/);function tt(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ot(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Ae(e.charCodeAt(n+1))&&Ae(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function K(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return V(l)?(e.enter(n),a(l)):t(l)}function a(l){return V(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const Wl={tokenize:Jl};function Jl(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),K(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return D(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Xl={tokenize:Kl},is={tokenize:Ql};function Kl(e){const t=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,l,u)(k)}return u(k)}function l(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const E=t.events.length;let $=E,w;for(;$--;)if(t.events[$][0]==="exit"&&t.events[$][1].type==="chunkFlow"){w=t.events[$][1].end;break}g(r);let R=E;for(;R<t.events.length;)t.events[R][1].end={...w},R++;return Ue(t.events,$+1,0,t.events.slice(E)),t.events.length=R,u(k)}return a(k)}function u(k){if(r===n.length){if(!i)return d(k);if(i.currentConstruct&&i.currentConstruct.concrete)return y(k);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(is,c,h)(k)}function c(k){return i&&_(),g(r),d(k)}function h(k){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,y(k)}function d(k){return t.containerState={},e.attempt(is,f,y)(k)}function f(k){return r++,n.push([t.currentConstruct,t.containerState]),d(k)}function y(k){if(k===null){i&&_(),g(0),e.consume(k);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(k)}function b(k){if(k===null){P(e.exit("chunkFlow"),!0),g(0),e.consume(k);return}return D(k)?(e.consume(k),P(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(k),b)}function P(k,E){const $=t.sliceStream(k);if(E&&$.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write($),t.parser.lazy[k.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const R=t.events.length;let N=R,T,F;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){if(T){F=t.events[N][1].end;break}T=!0}for(g(r),w=R;w<t.events.length;)t.events[w][1].end={...F},w++;Ue(t.events,N+1,0,t.events.slice(R)),t.events.length=w}}function g(k){let E=n.length;for(;E-- >k;){const $=n[E];t.containerState=$[1],$[0].exit.call(t,e)}n.length=k}function _(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Ql(e,t,n){return K(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ss(e){if(e===null||ye(e)||ql(e))return 1;if(Vl(e))return 2}function ri(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Fr={name:"attention",resolveAll:Gl,tokenize:Yl};function Gl(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},d={...e[n][1].start};os(h,-l),os(d,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:d},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[r][1].end={...o.start},e[n][1].start={...a.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Ie(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Ie(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Ie(u,ri(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Ie(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=Ie(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ue(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Yl(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ss(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=ss(l),h=!c||c===2&&i||n.includes(l),d=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!d)),u._close=!!(s===42?d:d&&(c||!h)),t(l)}}function os(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Zl={name:"autolink",tokenize:eu};function eu(e,t,n){let r=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(f){return ze(f)?(e.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||Ae(f)?(r=1,a(f)):u(f)}function a(f){return f===58?(e.consume(f),r=0,l):(f===43||f===45||f===46||Ae(f))&&r++<32?(e.consume(f),a):(r=0,u(f))}function l(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Or(f)?n(f):(e.consume(f),l)}function u(f){return f===64?(e.consume(f),c):jl(f)?(e.consume(f),u):n(f)}function c(f){return Ae(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,c):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):d(f)}function d(f){if((f===45||Ae(f))&&r++<63){const y=f===45?d:h;return e.consume(f),y}return n(f)}}const Hn={partial:!0,tokenize:tu};function tu(e,t,n){return r;function r(s){return V(s)?K(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||D(s)?t(s):n(s)}}const xo={continuation:{tokenize:ru},exit:iu,name:"blockQuote",tokenize:nu};function nu(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return V(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ru(e,t,n){const r=this;return i;function i(o){return V(o)?K(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(xo,t,n)(o)}}function iu(e){e.exit("blockQuote")}const _o={name:"characterEscape",tokenize:su};function su(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Hl(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ko={name:"characterReference",tokenize:ou};function ou(e,t,n){const r=this;let i=0,s,o;return a;function a(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),l}function l(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Ae,c(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Ul,c):(e.enter("characterReferenceValue"),s=7,o=$r,c(h))}function c(h){if(h===59&&i){const d=e.exit("characterReferenceValue");return o===Ae&&!ni(r.sliceSerialize(d))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&i++<s?(e.consume(h),c):n(h)}}const as={partial:!0,tokenize:lu},ls={concrete:!0,name:"codeFenced",tokenize:au};function au(e,t,n){const r=this,i={partial:!0,tokenize:$};let s=0,o=0,a;return l;function l(w){return u(w)}function u(w){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,a=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===a?(o++,e.consume(w),c):o<3?n(w):(e.exit("codeFencedFenceSequence"),V(w)?K(e,h,"whitespace")(w):h(w))}function h(w){return w===null||D(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(as,b,E)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(w))}function d(w){return w===null||D(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(w)):V(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),K(e,f,"whitespace")(w)):w===96&&w===a?n(w):(e.consume(w),d)}function f(w){return w===null||D(w)?h(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(w))}function y(w){return w===null||D(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(w)):w===96&&w===a?n(w):(e.consume(w),y)}function b(w){return e.attempt(i,E,P)(w)}function P(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),g}function g(w){return s>0&&V(w)?K(e,_,"linePrefix",s+1)(w):_(w)}function _(w){return w===null||D(w)?e.check(as,b,E)(w):(e.enter("codeFlowValue"),k(w))}function k(w){return w===null||D(w)?(e.exit("codeFlowValue"),_(w)):(e.consume(w),k)}function E(w){return e.exit("codeFenced"),t(w)}function $(w,R,N){let T=0;return F;function F(M){return w.enter("lineEnding"),w.consume(M),w.exit("lineEnding"),A}function A(M){return w.enter("codeFencedFence"),V(M)?K(w,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):I(M)}function I(M){return M===a?(w.enter("codeFencedFenceSequence"),H(M)):N(M)}function H(M){return M===a?(T++,w.consume(M),H):T>=o?(w.exit("codeFencedFenceSequence"),V(M)?K(w,J,"whitespace")(M):J(M)):N(M)}function J(M){return M===null||D(M)?(w.exit("codeFencedFence"),R(M)):N(M)}}}function lu(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const ar={name:"codeIndented",tokenize:cu},uu={partial:!0,tokenize:hu};function cu(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),K(e,s,"linePrefix",4+1)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):D(u)?e.attempt(uu,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||D(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function hu(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):D(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):K(e,s,"linePrefix",4+1)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):D(o)?i(o):n(o)}}const fu={name:"codeText",previous:pu,resolve:du,tokenize:mu};function du(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function pu(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mu(e,t,n){let r=0,i,s;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),a(h)}function a(h){return h===96?(e.consume(h),r++,a):(e.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),l):h===96?(s=e.enter("codeTextSequence"),i=0,c(h)):D(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||D(h)?(e.exit("codeTextData"),l(h)):(e.consume(h),u)}function c(h){return h===96?(e.consume(h),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(s.type="codeTextData",u(h))}}class gu{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&zt(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),zt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),zt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);zt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);zt(this.left,n.reverse())}}}function zt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function So(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new gu(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,yu(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Ue(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function yu(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,d=-1,f=n,y=0,b=0;const P=[b];for(;f;){for(;e.get(++i)[1]!==f;);s.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(b=d+1,P.push(b),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):P.pop(),d=P.length;d--;){const g=a.slice(P[d],P[d+1]),_=s.pop();l.push([_,_+g.length-1]),e.splice(_,2,g)}for(l.reverse(),d=-1;++d<l.length;)u[y+l[d][0]]=y+l[d][1],y+=l[d][1]-l[d][0]-1;return u}const wu={resolve:xu,tokenize:_u},bu={partial:!0,tokenize:ku};function xu(e){return So(e),e}function _u(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):D(a)?e.check(bu,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ku(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),K(e,s,"linePrefix")}function s(o){if(o===null||D(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Co(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(g){return g===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(g),e.exit(s),d):g===null||g===32||g===41||Or(g)?n(g):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),b(g))}function d(g){return g===62?(e.enter(s),e.consume(g),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(a),d(g)):g===null||g===60||D(g)?n(g):(e.consume(g),g===92?y:f)}function y(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function b(g){return!c&&(g===null||g===41||ye(g))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(g)):c<u&&g===40?(e.consume(g),c++,b):g===41?(e.consume(g),c--,b):g===null||g===32||g===40||Or(g)?n(g):(e.consume(g),g===92?P:b)}function P(g){return g===40||g===41||g===92?(e.consume(g),b):b(g)}}function Ao(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(s),c}function c(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(s),e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):D(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||D(f)||a++>999?(e.exit("chunkString"),c(f)):(e.consume(f),l||(l=!V(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(e.consume(f),a++,h):h(f)}}function Po(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,l):n(d)}function l(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),u(d))}function u(d){return d===o?(e.exit(s),l(o)):d===null?n(d):D(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),K(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||D(d)?(e.exit("chunkString"),u(d)):(e.consume(d),d===92?h:c)}function h(d){return d===o||d===92?(e.consume(d),c):c(d)}}function Kt(e,t){let n;return r;function r(i){return D(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):V(i)?K(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Su={name:"definition",tokenize:Au},Cu={partial:!0,tokenize:Pu};function Au(e,t,n){const r=this;let i;return s;function s(f){return e.enter("definition"),o(f)}function o(f){return Ao.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=Pt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),l):n(f)}function l(f){return ye(f)?Kt(e,u)(f):u(f)}function u(f){return Co(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return e.attempt(Cu,h,h)(f)}function h(f){return V(f)?K(e,d,"whitespace")(f):d(f)}function d(f){return f===null||D(f)?(e.exit("definition"),r.parser.defined.push(i),t(f)):n(f)}}function Pu(e,t,n){return r;function r(a){return ye(a)?Kt(e,i)(a):n(a)}function i(a){return Po(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return V(a)?K(e,o,"whitespace")(a):o(a)}function o(a){return a===null||D(a)?t(a):n(a)}}const Eu={name:"hardBreakEscape",tokenize:Iu};function Iu(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return D(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const vu={name:"headingAtx",resolve:Ru,tokenize:Tu};function Ru(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ue(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Tu(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ye(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||D(c)?(e.exit("atxHeading"),t(c)):V(c)?K(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||ye(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const Ou=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],us=["pre","script","style","textarea"],$u={concrete:!0,name:"htmlFlow",resolveTo:Lu,tokenize:Du},Fu={partial:!0,tokenize:Bu},Mu={partial:!0,tokenize:Nu};function Lu(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Du(e,t,n){const r=this;let i,s,o,a,l;return u;function u(p){return c(p)}function c(p){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(p),h}function h(p){return p===33?(e.consume(p),d):p===47?(e.consume(p),s=!0,b):p===63?(e.consume(p),i=3,r.interrupt?t:m):ze(p)?(e.consume(p),o=String.fromCharCode(p),P):n(p)}function d(p){return p===45?(e.consume(p),i=2,f):p===91?(e.consume(p),i=5,a=0,y):ze(p)?(e.consume(p),i=4,r.interrupt?t:m):n(p)}function f(p){return p===45?(e.consume(p),r.interrupt?t:m):n(p)}function y(p){const G="CDATA[";return p===G.charCodeAt(a++)?(e.consume(p),a===G.length?r.interrupt?t:I:y):n(p)}function b(p){return ze(p)?(e.consume(p),o=String.fromCharCode(p),P):n(p)}function P(p){if(p===null||p===47||p===62||ye(p)){const G=p===47,it=o.toLowerCase();return!G&&!s&&us.includes(it)?(i=1,r.interrupt?t(p):I(p)):Ou.includes(o.toLowerCase())?(i=6,G?(e.consume(p),g):r.interrupt?t(p):I(p)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(p):s?_(p):k(p))}return p===45||Ae(p)?(e.consume(p),o+=String.fromCharCode(p),P):n(p)}function g(p){return p===62?(e.consume(p),r.interrupt?t:I):n(p)}function _(p){return V(p)?(e.consume(p),_):F(p)}function k(p){return p===47?(e.consume(p),F):p===58||p===95||ze(p)?(e.consume(p),E):V(p)?(e.consume(p),k):F(p)}function E(p){return p===45||p===46||p===58||p===95||Ae(p)?(e.consume(p),E):$(p)}function $(p){return p===61?(e.consume(p),w):V(p)?(e.consume(p),$):k(p)}function w(p){return p===null||p===60||p===61||p===62||p===96?n(p):p===34||p===39?(e.consume(p),l=p,R):V(p)?(e.consume(p),w):N(p)}function R(p){return p===l?(e.consume(p),l=null,T):p===null||D(p)?n(p):(e.consume(p),R)}function N(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||ye(p)?$(p):(e.consume(p),N)}function T(p){return p===47||p===62||V(p)?k(p):n(p)}function F(p){return p===62?(e.consume(p),A):n(p)}function A(p){return p===null||D(p)?I(p):V(p)?(e.consume(p),A):n(p)}function I(p){return p===45&&i===2?(e.consume(p),ee):p===60&&i===1?(e.consume(p),te):p===62&&i===4?(e.consume(p),be):p===63&&i===3?(e.consume(p),m):p===93&&i===5?(e.consume(p),Pe):D(p)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Fu,he,H)(p)):p===null||D(p)?(e.exit("htmlFlowData"),H(p)):(e.consume(p),I)}function H(p){return e.check(Mu,J,he)(p)}function J(p){return e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),M}function M(p){return p===null||D(p)?H(p):(e.enter("htmlFlowData"),I(p))}function ee(p){return p===45?(e.consume(p),m):I(p)}function te(p){return p===47?(e.consume(p),o="",pe):I(p)}function pe(p){if(p===62){const G=o.toLowerCase();return us.includes(G)?(e.consume(p),be):I(p)}return ze(p)&&o.length<8?(e.consume(p),o+=String.fromCharCode(p),pe):I(p)}function Pe(p){return p===93?(e.consume(p),m):I(p)}function m(p){return p===62?(e.consume(p),be):p===45&&i===2?(e.consume(p),m):I(p)}function be(p){return p===null||D(p)?(e.exit("htmlFlowData"),he(p)):(e.consume(p),be)}function he(p){return e.exit("htmlFlow"),t(p)}}function Nu(e,t,n){const r=this;return i;function i(o){return D(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Bu(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Hn,t,n)}}const zu={name:"htmlText",tokenize:ju};function ju(e,t,n){const r=this;let i,s,o;return a;function a(m){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(m),l}function l(m){return m===33?(e.consume(m),u):m===47?(e.consume(m),$):m===63?(e.consume(m),k):ze(m)?(e.consume(m),N):n(m)}function u(m){return m===45?(e.consume(m),c):m===91?(e.consume(m),s=0,y):ze(m)?(e.consume(m),_):n(m)}function c(m){return m===45?(e.consume(m),f):n(m)}function h(m){return m===null?n(m):m===45?(e.consume(m),d):D(m)?(o=h,te(m)):(e.consume(m),h)}function d(m){return m===45?(e.consume(m),f):h(m)}function f(m){return m===62?ee(m):m===45?d(m):h(m)}function y(m){const be="CDATA[";return m===be.charCodeAt(s++)?(e.consume(m),s===be.length?b:y):n(m)}function b(m){return m===null?n(m):m===93?(e.consume(m),P):D(m)?(o=b,te(m)):(e.consume(m),b)}function P(m){return m===93?(e.consume(m),g):b(m)}function g(m){return m===62?ee(m):m===93?(e.consume(m),g):b(m)}function _(m){return m===null||m===62?ee(m):D(m)?(o=_,te(m)):(e.consume(m),_)}function k(m){return m===null?n(m):m===63?(e.consume(m),E):D(m)?(o=k,te(m)):(e.consume(m),k)}function E(m){return m===62?ee(m):k(m)}function $(m){return ze(m)?(e.consume(m),w):n(m)}function w(m){return m===45||Ae(m)?(e.consume(m),w):R(m)}function R(m){return D(m)?(o=R,te(m)):V(m)?(e.consume(m),R):ee(m)}function N(m){return m===45||Ae(m)?(e.consume(m),N):m===47||m===62||ye(m)?T(m):n(m)}function T(m){return m===47?(e.consume(m),ee):m===58||m===95||ze(m)?(e.consume(m),F):D(m)?(o=T,te(m)):V(m)?(e.consume(m),T):ee(m)}function F(m){return m===45||m===46||m===58||m===95||Ae(m)?(e.consume(m),F):A(m)}function A(m){return m===61?(e.consume(m),I):D(m)?(o=A,te(m)):V(m)?(e.consume(m),A):T(m)}function I(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),i=m,H):D(m)?(o=I,te(m)):V(m)?(e.consume(m),I):(e.consume(m),J)}function H(m){return m===i?(e.consume(m),i=void 0,M):m===null?n(m):D(m)?(o=H,te(m)):(e.consume(m),H)}function J(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||ye(m)?T(m):(e.consume(m),J)}function M(m){return m===47||m===62||ye(m)?T(m):n(m)}function ee(m){return m===62?(e.consume(m),e.exit("htmlTextData"),e.exit("htmlText"),t):n(m)}function te(m){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),pe}function pe(m){return V(m)?K(e,Pe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):Pe(m)}function Pe(m){return e.enter("htmlTextData"),o(m)}}const ii={name:"labelEnd",resolveAll:qu,resolveTo:Wu,tokenize:Ju},Uu={tokenize:Xu},Hu={tokenize:Ku},Vu={tokenize:Qu};function qu(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Ue(e,0,e.length,n),e}function Wu(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",u,t]],a=Ie(a,e.slice(s+1,s+r+3)),a=Ie(a,[["enter",c,t]]),a=Ie(a,ri(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Ie(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=Ie(a,e.slice(o+1)),a=Ie(a,[["exit",l,t]]),Ue(e,s,e.length,a),e}function Ju(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?h(d):(o=r.parser.defined.includes(Pt(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),l):n(d)}function l(d){return d===40?e.attempt(Uu,c,o?c:h)(d):d===91?e.attempt(Hu,c,o?u:h)(d):o?c(d):h(d)}function u(d){return e.attempt(Vu,c,h)(d)}function c(d){return t(d)}function h(d){return s._balanced=!0,n(d)}}function Xu(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return ye(h)?Kt(e,s)(h):s(h)}function s(h){return h===41?c(h):Co(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return ye(h)?Kt(e,l)(h):c(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?Po(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return ye(h)?Kt(e,c)(h):c(h)}function c(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Ku(e,t,n){const r=this;return i;function i(a){return Ao.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Pt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Qu(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Gu={name:"labelStartImage",resolveAll:ii.resolveAll,tokenize:Yu};function Yu(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Zu={name:"labelStartLink",resolveAll:ii.resolveAll,tokenize:ec};function ec(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const lr={name:"lineEnding",tokenize:tc};function tc(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),K(e,t,"linePrefix")}}const In={name:"thematicBreak",tokenize:nc};function nc(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||D(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),V(u)?K(e,a,"whitespace")(u):a(u))}}const me={continuation:{tokenize:oc},exit:lc,name:"list",tokenize:sc},rc={partial:!0,tokenize:uc},ic={partial:!0,tokenize:ac};function sc(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const y=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:$r(f)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(In,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(f)}return n(f)}function l(f){return $r(f)&&++o<10?(e.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Hn,r.interrupt?n:c,e.attempt(rc,d,h))}function c(f){return r.containerState.initialBlankLine=!0,s++,d(f)}function h(f){return V(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function oc(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Hn,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,K(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!V(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ic,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,K(e,e.attempt(me,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function ac(e,t,n){const r=this;return K(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function lc(e){e.exit(this.containerState.type)}function uc(e,t,n){const r=this;return K(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(s){const o=r.events[r.events.length-1];return!V(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const cs={name:"setextUnderline",resolveTo:cc,tokenize:hc};function cc(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function hc(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),V(u)?K(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||D(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const fc={tokenize:dc};function dc(e){const t=this,n=e.attempt(Hn,r,e.attempt(this.parser.constructs.flowInitial,i,K(e,e.attempt(this.parser.constructs.flow,i,e.attempt(wu,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const pc={resolveAll:Io()},mc=Eo("string"),gc=Eo("text");function Eo(e){return{resolveAll:Io(e==="text"?yc:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Io(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function yc(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const wc={42:me,43:me,45:me,48:me,49:me,50:me,51:me,52:me,53:me,54:me,55:me,56:me,57:me,62:xo},bc={91:Su},xc={[-2]:ar,[-1]:ar,32:ar},_c={35:vu,42:In,45:[cs,In],60:$u,61:cs,95:In,96:ls,126:ls},kc={38:ko,92:_o},Sc={[-5]:lr,[-4]:lr,[-3]:lr,33:Gu,38:ko,42:Fr,60:[Zl,zu],91:Zu,92:[Eu,_o],93:ii,95:Fr,96:fu},Cc={null:[Fr,pc]},Ac={null:[42,95]},Pc={null:[]},Ec=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ac,contentInitial:bc,disable:Pc,document:wc,flow:_c,flowInitial:xc,insideSpan:Cc,string:kc,text:Sc},Symbol.toStringTag,{value:"Module"}));function Ic(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:R($),check:R(w),consume:_,enter:k,exit:E,interrupt:R(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:e,previous:null,sliceSerialize:d,sliceStream:f,write:h};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function h(A){return o=Ie(o,A),P(),o[o.length-1]!==null?[]:(N(t,0),u.events=ri(s,u.events,u),u.events)}function d(A,I){return Rc(f(A),I)}function f(A){return vc(o,A)}function y(){const{_bufferIndex:A,_index:I,line:H,column:J,offset:M}=r;return{_bufferIndex:A,_index:I,line:H,column:J,offset:M}}function b(A){i[A.line]=A.column,F()}function P(){let A;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<I.length;)g(I.charCodeAt(r._bufferIndex));else g(I)}}function g(A){c=c(A)}function _(A){D(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,F()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=A}function k(A,I){const H=I||{};return H.type=A,H.start=y(),u.events.push(["enter",H,u]),a.push(H),H}function E(A){const I=a.pop();return I.end=y(),u.events.push(["exit",I,u]),I}function $(A,I){N(A,I.from)}function w(A,I){I.restore()}function R(A,I){return H;function H(J,M,ee){let te,pe,Pe,m;return Array.isArray(J)?he(J):"tokenize"in J?he([J]):be(J);function be(le){return Dt;function Dt(Xe){const dt=Xe!==null&&le[Xe],pt=Xe!==null&&le.null,pn=[...Array.isArray(dt)?dt:dt?[dt]:[],...Array.isArray(pt)?pt:pt?[pt]:[]];return he(pn)(Xe)}}function he(le){return te=le,pe=0,le.length===0?ee:p(le[pe])}function p(le){return Dt;function Dt(Xe){return m=T(),Pe=le,le.partial||(u.currentConstruct=le),le.name&&u.parser.constructs.disable.null.includes(le.name)?it():le.tokenize.call(I?Object.assign(Object.create(u),I):u,l,G,it)(Xe)}}function G(le){return A(Pe,m),M}function it(le){return m.restore(),++pe<te.length?p(te[pe]):ee}}}function N(A,I){A.resolveAll&&!s.includes(A)&&s.push(A),A.resolve&&Ue(u.events,I,u.events.length-I,A.resolve(u.events.slice(I),u)),A.resolveTo&&(u.events=A.resolveTo(u.events,u))}function T(){const A=y(),I=u.previous,H=u.currentConstruct,J=u.events.length,M=Array.from(a);return{from:J,restore:ee};function ee(){r=A,u.previous=I,u.currentConstruct=H,u.events.length=J,a=M,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function vc(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Rc(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Tc(e){const r={constructs:Nl([Ec,...(e||{}).extensions||[]]),content:i(Wl),defined:[],document:i(Xl),flow:i(fc),lazy:{},string:i(mc),text:i(gc)};return r;function i(s){return o;function o(a){return Ic(r,s,a)}}}function Oc(e){for(;!So(e););return e}const hs=/[\0\t\n\r]/g;function $c(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,d,f;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,t="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(hs.lastIndex=h,u=hs.exec(s),d=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(d),!u){t=s.slice(h);break}if(f===10&&h===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<d&&(l.push(s.slice(h,d)),e+=d-h),f){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}h=d+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Fc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Mc(e){return e.replace(Fc,Lc)}function Lc(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return bo(n.slice(s?2:1),s?16:10)}return ni(n)||e}function Qt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?fs(e.position):"start"in e||"end"in e?fs(e):"line"in e||"column"in e?Mr(e):""}function Mr(e){return ds(e&&e.line)+":"+ds(e&&e.column)}function fs(e){return Mr(e&&e.start)+"-"+Mr(e&&e.end)}function ds(e){return e&&typeof e=="number"?e:1}const vo={}.hasOwnProperty;function Dc(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Nc(n)(Oc(Tc(n).document().write($c()(e,t,!0))))}function Nc(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Gi),autolinkProtocol:T,autolinkEmail:T,atxHeading:s(Xi),blockQuote:s(pt),characterEscape:T,characterReference:T,codeFenced:s(pn),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(pn,o),codeText:s(yl,o),codeTextData:T,data:T,codeFlowValue:T,definition:s(wl),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(bl),hardBreakEscape:s(Ki),hardBreakTrailing:s(Ki),htmlFlow:s(Qi,o),htmlFlowData:T,htmlText:s(Qi,o),htmlTextData:T,image:s(xl),label:o,link:s(Gi),listItem:s(_l),listItemValue:d,listOrdered:s(Yi,h),listUnordered:s(Yi),paragraph:s(kl),reference:p,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Xi),strong:s(Sl),thematicBreak:s(Al)},exit:{atxHeading:l(),atxHeadingSequence:$,autolink:l(),autolinkEmail:dt,autolinkProtocol:Xe,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:it,characterReferenceMarkerNumeric:it,characterReferenceValue:le,characterReference:Dt,codeFenced:l(P),codeFencedFence:b,codeFencedFenceInfo:f,codeFencedFenceMeta:y,codeFlowValue:F,codeIndented:l(g),codeText:l(M),codeTextData:F,data:F,definition:l(),definitionDestinationString:E,definitionLabelString:_,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(H),htmlFlowData:F,htmlText:l(J),htmlTextData:F,image:l(te),label:Pe,labelText:pe,lineEnding:A,link:l(ee),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:G,resourceDestinationString:m,resourceTitleString:be,resource:he,setextHeading:l(N),setextHeadingLineSequence:R,setextHeadingText:w,strong:l(),thematicBreak:l()}};Ro(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(x){let C={type:"root",children:[]};const z={stack:[C],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},U=[];let W=-1;for(;++W<x.length;)if(x[W][1].type==="listOrdered"||x[W][1].type==="listUnordered")if(x[W][0]==="enter")U.push(W);else{const Te=U.pop();W=i(x,Te,W)}for(W=-1;++W<x.length;){const Te=t[x[W][0]];vo.call(Te,x[W][1].type)&&Te[x[W][1].type].call(Object.assign({sliceSerialize:x[W][2].sliceSerialize},z),x[W][1])}if(z.tokenStack.length>0){const Te=z.tokenStack[z.tokenStack.length-1];(Te[1]||ps).call(z,void 0,Te[0])}for(C.position={start:Ke(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:Ke(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},W=-1;++W<t.transforms.length;)C=t.transforms[W](C)||C;return C}function i(x,C,z){let U=C-1,W=-1,Te=!1,st,He,Nt,Bt;for(;++U<=z;){const xe=x[U];switch(xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{xe[0]==="enter"?W++:W--,Bt=void 0;break}case"lineEndingBlank":{xe[0]==="enter"&&(st&&!Bt&&!W&&!Nt&&(Nt=U),Bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Bt=void 0}if(!W&&xe[0]==="enter"&&xe[1].type==="listItemPrefix"||W===-1&&xe[0]==="exit"&&(xe[1].type==="listUnordered"||xe[1].type==="listOrdered")){if(st){let mt=U;for(He=void 0;mt--;){const Ve=x[mt];if(Ve[1].type==="lineEnding"||Ve[1].type==="lineEndingBlank"){if(Ve[0]==="exit")continue;He&&(x[He][1].type="lineEndingBlank",Te=!0),Ve[1].type="lineEnding",He=mt}else if(!(Ve[1].type==="linePrefix"||Ve[1].type==="blockQuotePrefix"||Ve[1].type==="blockQuotePrefixWhitespace"||Ve[1].type==="blockQuoteMarker"||Ve[1].type==="listItemIndent"))break}Nt&&(!He||Nt<He)&&(st._spread=!0),st.end=Object.assign({},He?x[He][1].start:xe[1].end),x.splice(He||U,0,["exit",st,xe[2]]),U++,z++}if(xe[1].type==="listItemPrefix"){const mt={type:"listItem",_spread:!1,start:Object.assign({},xe[1].start),end:void 0};st=mt,x.splice(U,0,["enter",mt,xe[2]]),U++,z++,Nt=void 0,Bt=!0}}}return x[C][1]._spread=Te,z}function s(x,C){return z;function z(U){a.call(this,x(U),U),C&&C.call(this,U)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(x,C,z){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([C,z||void 0]),x.position={start:Ke(C.start),end:void 0}}function l(x){return C;function C(z){x&&x.call(this,z),u.call(this,z)}}function u(x,C){const z=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==x.type&&(C?C.call(this,x,U[0]):(U[1]||ps).call(this,x,U[0]));else throw new Error("Cannot close `"+x.type+"` ("+Qt({start:x.start,end:x.end})+"): it’s not open");z.position.end=Ke(x.end)}function c(){return Ll(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(x){if(this.data.expectingFirstListItemValue){const C=this.stack[this.stack.length-2];C.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function f(){const x=this.resume(),C=this.stack[this.stack.length-1];C.lang=x}function y(){const x=this.resume(),C=this.stack[this.stack.length-1];C.meta=x}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const x=this.resume(),C=this.stack[this.stack.length-1];C.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const x=this.resume(),C=this.stack[this.stack.length-1];C.value=x.replace(/(\r?\n|\r)$/g,"")}function _(x){const C=this.resume(),z=this.stack[this.stack.length-1];z.label=C,z.identifier=Pt(this.sliceSerialize(x)).toLowerCase()}function k(){const x=this.resume(),C=this.stack[this.stack.length-1];C.title=x}function E(){const x=this.resume(),C=this.stack[this.stack.length-1];C.url=x}function $(x){const C=this.stack[this.stack.length-1];if(!C.depth){const z=this.sliceSerialize(x).length;C.depth=z}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function R(x){const C=this.stack[this.stack.length-1];C.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function T(x){const z=this.stack[this.stack.length-1].children;let U=z[z.length-1];(!U||U.type!=="text")&&(U=Cl(),U.position={start:Ke(x.start),end:void 0},z.push(U)),this.stack.push(U)}function F(x){const C=this.stack.pop();C.value+=this.sliceSerialize(x),C.position.end=Ke(x.end)}function A(x){const C=this.stack[this.stack.length-1];if(this.data.atHardBreak){const z=C.children[C.children.length-1];z.position.end=Ke(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(C.type)&&(T.call(this,x),F.call(this,x))}function I(){this.data.atHardBreak=!0}function H(){const x=this.resume(),C=this.stack[this.stack.length-1];C.value=x}function J(){const x=this.resume(),C=this.stack[this.stack.length-1];C.value=x}function M(){const x=this.resume(),C=this.stack[this.stack.length-1];C.value=x}function ee(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=C,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function te(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=C,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function pe(x){const C=this.sliceSerialize(x),z=this.stack[this.stack.length-2];z.label=Mc(C),z.identifier=Pt(C).toLowerCase()}function Pe(){const x=this.stack[this.stack.length-1],C=this.resume(),z=this.stack[this.stack.length-1];if(this.data.inReference=!0,z.type==="link"){const U=x.children;z.children=U}else z.alt=C}function m(){const x=this.resume(),C=this.stack[this.stack.length-1];C.url=x}function be(){const x=this.resume(),C=this.stack[this.stack.length-1];C.title=x}function he(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function G(x){const C=this.resume(),z=this.stack[this.stack.length-1];z.label=C,z.identifier=Pt(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function it(x){this.data.characterReferenceType=x.type}function le(x){const C=this.sliceSerialize(x),z=this.data.characterReferenceType;let U;z?(U=bo(C,z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):U=ni(C);const W=this.stack[this.stack.length-1];W.value+=U}function Dt(x){const C=this.stack.pop();C.position.end=Ke(x.end)}function Xe(x){F.call(this,x);const C=this.stack[this.stack.length-1];C.url=this.sliceSerialize(x)}function dt(x){F.call(this,x);const C=this.stack[this.stack.length-1];C.url="mailto:"+this.sliceSerialize(x)}function pt(){return{type:"blockquote",children:[]}}function pn(){return{type:"code",lang:null,meta:null,value:""}}function yl(){return{type:"inlineCode",value:""}}function wl(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function bl(){return{type:"emphasis",children:[]}}function Xi(){return{type:"heading",depth:0,children:[]}}function Ki(){return{type:"break"}}function Qi(){return{type:"html",value:""}}function xl(){return{type:"image",title:null,url:"",alt:null}}function Gi(){return{type:"link",title:null,url:"",children:[]}}function Yi(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function _l(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function kl(){return{type:"paragraph",children:[]}}function Sl(){return{type:"strong",children:[]}}function Cl(){return{type:"text",value:""}}function Al(){return{type:"thematicBreak"}}}function Ke(e){return{line:e.line,column:e.column,offset:e.offset}}function Ro(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Ro(e,r):Bc(e,r)}}function Bc(e,t){let n;for(n in t)if(vo.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ps(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Qt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Qt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Qt({start:t.start,end:t.end})+") is still open")}function zc(e){const t=this;t.parser=n;function n(r){return Dc(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function jc(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Uc(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Hc(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Vc(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qc(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wc(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ot(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Jc(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xc(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function To(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Kc(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return To(e,t);const i={src:Ot(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Qc(e,t){const n={src:Ot(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Gc(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Yc(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return To(e,t);const i={href:Ot(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Zc(e,t){const n={href:Ot(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function eh(e,t,n){const r=e.all(t),i=n?th(n):Oo(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function th(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Oo(n[r])}return t}function Oo(e){const t=e.spread;return t??e.children.length>1}function nh(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function rh(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ih(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function sh(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const $o=Mo("end"),Fo=Mo("start");function Mo(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function oh(e){const t=Fo(e),n=$o(e);if(t&&n)return{start:t,end:n}}function ah(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Fo(t.children[1]),l=$o(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function lh(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const h=t.children[l],d={},f=o?o[l]:void 0;f&&(d.align=f);let y={type:"element",tagName:s,properties:d,children:[]};h&&(y.children=e.all(h),e.patch(h,y),y=e.applyData(h,y)),u.push(y)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function uh(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const ms=9,gs=32;function ch(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(ys(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(ys(t.slice(i),i>0,!1)),s.join("")}function ys(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===ms||s===gs;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===ms||s===gs;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function hh(e,t){const n={type:"text",value:ch(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function fh(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const dh={blockquote:jc,break:Uc,code:Hc,delete:Vc,emphasis:qc,footnoteReference:Wc,heading:Jc,html:Xc,imageReference:Kc,image:Qc,inlineCode:Gc,linkReference:Yc,link:Zc,listItem:eh,list:nh,paragraph:rh,root:ih,strong:sh,table:ah,tableCell:uh,tableRow:lh,text:hh,thematicBreak:fh,toml:mn,yaml:mn,definition:mn,footnoteDefinition:mn};function mn(){}const Lo=-1,Vn=0,Gt=1,Dn=2,si=3,oi=4,ai=5,li=6,Do=7,No=8,ws=typeof self=="object"?self:globalThis,ph=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case Vn:case Lo:return n(o,i);case Gt:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Dn:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case si:return n(new Date(o),i);case oi:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case ai:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case li:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case Do:{const{name:a,message:l}=o;return n(new ws[a](l),i)}case No:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new ws[s](o),i)};return r},bs=e=>ph(new Map,e)(0),gt="",{toString:mh}={},{keys:gh}=Object,jt=e=>{const t=typeof e;if(t!=="object"||!e)return[Vn,t];const n=mh.call(e).slice(8,-1);switch(n){case"Array":return[Gt,gt];case"Object":return[Dn,gt];case"Date":return[si,gt];case"RegExp":return[oi,gt];case"Map":return[ai,gt];case"Set":return[li,gt];case"DataView":return[Gt,n]}return n.includes("Array")?[Gt,n]:n.includes("Error")?[Do,n]:[Dn,n]},gn=([e,t])=>e===Vn&&(t==="function"||t==="symbol"),yh=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=jt(o);switch(a){case Vn:{let c=o;switch(l){case"bigint":a=No,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([Lo],o)}return i([a,c],o)}case Gt:{if(l){let d=o;return l==="DataView"?d=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(d=new Uint8Array(o)),i([l,[...d]],o)}const c=[],h=i([a,c],o);for(const d of o)c.push(s(d));return h}case Dn:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],h=i([a,c],o);for(const d of gh(o))(e||!gn(jt(o[d])))&&c.push([s(d),s(o[d])]);return h}case si:return i([a,o.toISOString()],o);case oi:{const{source:c,flags:h}=o;return i([a,{source:c,flags:h}],o)}case ai:{const c=[],h=i([a,c],o);for(const[d,f]of o)(e||!(gn(jt(d))||gn(jt(f))))&&c.push([s(d),s(f)]);return h}case li:{const c=[],h=i([a,c],o);for(const d of o)(e||!gn(jt(d)))&&c.push(s(d));return h}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},xs=(e,{json:t,lossy:n}={})=>{const r=[];return yh(!(t||n),!!t,new Map,r)(e),r},Nn=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?bs(xs(e,t)):structuredClone(e):(e,t)=>bs(xs(e,t));function wh(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function bh(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function xh(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||wh,r=e.options.footnoteBackLabel||bh,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),h=String(u.identifier).toUpperCase(),d=Ot(h.toLowerCase());let f=0;const y=[],b=e.footnoteCounts.get(h);for(;b!==void 0&&++f<=b;){y.length>0&&y.push({type:"text",value:" "});let _=typeof n=="string"?n:n(l,f);typeof _=="string"&&(_={type:"text",value:_}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const P=c[c.length-1];if(P&&P.type==="element"&&P.tagName==="p"){const _=P.children[P.children.length-1];_&&_.type==="text"?_.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(...y)}else c.push(...y);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(u,g),a.push(g)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Nn(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Bo=function(e){if(e==null)return Ch;if(typeof e=="function")return qn(e);if(typeof e=="object")return Array.isArray(e)?_h(e):kh(e);if(typeof e=="string")return Sh(e);throw new Error("Expected function, string, or object as test")};function _h(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bo(e[n]);return qn(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function kh(e){const t=e;return qn(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Sh(e){return qn(t);function t(n){return n&&n.type===e}}function qn(e){return t;function t(n,r,i){return!!(Ah(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ch(){return!0}function Ah(e){return e!==null&&typeof e=="object"&&"type"in e}const zo=[],Ph=!0,_s=!1,Eh="skip";function Ih(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Bo(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=zo,y,b,P;if((!t||s(l,u,c[c.length-1]||void 0))&&(f=vh(n(l,c)),f[0]===_s))return f;if("children"in l&&l.children){const g=l;if(g.children&&f[0]!==Eh)for(b=(r?g.children.length:-1)+o,P=c.concat(g);b>-1&&b<g.children.length;){const _=g.children[b];if(y=a(_,b,P)(),y[0]===_s)return y;b=typeof y[1]=="number"?y[1]:b+o}}return f}}}function vh(e){return Array.isArray(e)?e:typeof e=="number"?[Ph,e]:e==null?zo:[e]}function Rh(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Ih(e,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}const Lr={}.hasOwnProperty,Th={};function Oh(e,t){const n=t||Th,r=new Map,i=new Map,s=new Map,o={...dh,...n.handlers},a={all:u,applyData:Fh,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:$h,wrap:Lh};return Rh(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();h.has(d)||h.set(d,c)}}),a;function l(c,h){const d=c.type,f=a.handlers[d];if(Lr.call(a.handlers,d)&&f)return f(a,c,h);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:b,...P}=c,g=Nn(P);return g.children=a.all(c),g}return Nn(c)}return(a.options.unknownHandler||Mh)(a,c,h)}function u(c){const h=[];if("children"in c){const d=c.children;let f=-1;for(;++f<d.length;){const y=a.one(d[f],c);if(y){if(f&&d[f-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=ks(y.value)),!Array.isArray(y)&&y.type==="element")){const b=y.children[0];b&&b.type==="text"&&(b.value=ks(b.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function $h(e,t){e.position&&(t.position=oh(e))}function Fh(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Nn(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Mh(e,t){const n=t.data||{},r="value"in t&&!(Lr.call(n,"hProperties")||Lr.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Lh(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ks(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ss(e,t){const n=Oh(e,t),r=n.one(e,void 0),i=xh(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Dh(e,t){return e&&"run"in e?async function(n,r){const i=Ss(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Ss(n,{file:r,...e||t})}}class sn{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}sn.prototype.property={};sn.prototype.normal={};sn.prototype.space=null;function jo(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new sn(n,r,t)}function Dr(e){return e.toLowerCase()}class Re{constructor(t,n){this.property=t,this.attribute=n}}Re.prototype.space=null;Re.prototype.boolean=!1;Re.prototype.booleanish=!1;Re.prototype.overloadedBoolean=!1;Re.prototype.number=!1;Re.prototype.commaSeparated=!1;Re.prototype.spaceSeparated=!1;Re.prototype.commaOrSpaceSeparated=!1;Re.prototype.mustUseProperty=!1;Re.prototype.defined=!1;let Nh=0;const j=ft(),ne=ft(),Uo=ft(),S=ft(),X=ft(),Et=ft(),ke=ft();function ft(){return 2**++Nh}const Nr=Object.freeze(Object.defineProperty({__proto__:null,boolean:j,booleanish:ne,commaOrSpaceSeparated:ke,commaSeparated:Et,number:S,overloadedBoolean:Uo,spaceSeparated:X},Symbol.toStringTag,{value:"Module"})),ur=Object.keys(Nr);class ui extends Re{constructor(t,n,r,i){let s=-1;if(super(t,n),Cs(this,"space",i),typeof r=="number")for(;++s<ur.length;){const o=ur[s];Cs(this,ur[s],(r&Nr[o])===Nr[o])}}}ui.prototype.defined=!0;function Cs(e,t,n){n&&(e[t]=n)}const Bh={}.hasOwnProperty;function $t(e){const t={},n={};let r;for(r in e.properties)if(Bh.call(e.properties,r)){const i=e.properties[r],s=new ui(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Dr(r)]=r,n[Dr(s.attribute)]=r}return new sn(t,n,e.space)}const Ho=$t({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Vo=$t({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function qo(e,t){return t in e?e[t]:t}function Wo(e,t){return qo(e,t.toLowerCase())}const Jo=$t({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Wo,properties:{xmlns:null,xmlnsXLink:null}}),Xo=$t({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ne,ariaAutoComplete:null,ariaBusy:ne,ariaChecked:ne,ariaColCount:S,ariaColIndex:S,ariaColSpan:S,ariaControls:X,ariaCurrent:null,ariaDescribedBy:X,ariaDetails:null,ariaDisabled:ne,ariaDropEffect:X,ariaErrorMessage:null,ariaExpanded:ne,ariaFlowTo:X,ariaGrabbed:ne,ariaHasPopup:null,ariaHidden:ne,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:X,ariaLevel:S,ariaLive:null,ariaModal:ne,ariaMultiLine:ne,ariaMultiSelectable:ne,ariaOrientation:null,ariaOwns:X,ariaPlaceholder:null,ariaPosInSet:S,ariaPressed:ne,ariaReadOnly:ne,ariaRelevant:null,ariaRequired:ne,ariaRoleDescription:X,ariaRowCount:S,ariaRowIndex:S,ariaRowSpan:S,ariaSelected:ne,ariaSetSize:S,ariaSort:null,ariaValueMax:S,ariaValueMin:S,ariaValueNow:S,ariaValueText:null,role:null}}),zh=$t({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Wo,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Et,acceptCharset:X,accessKey:X,action:null,allow:null,allowFullScreen:j,allowPaymentRequest:j,allowUserMedia:j,alt:null,as:null,async:j,autoCapitalize:null,autoComplete:X,autoFocus:j,autoPlay:j,blocking:X,capture:null,charSet:null,checked:j,cite:null,className:X,cols:S,colSpan:null,content:null,contentEditable:ne,controls:j,controlsList:X,coords:S|Et,crossOrigin:null,data:null,dateTime:null,decoding:null,default:j,defer:j,dir:null,dirName:null,disabled:j,download:Uo,draggable:ne,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:j,formTarget:null,headers:X,height:S,hidden:j,high:S,href:null,hrefLang:null,htmlFor:X,httpEquiv:X,id:null,imageSizes:null,imageSrcSet:null,inert:j,inputMode:null,integrity:null,is:null,isMap:j,itemId:null,itemProp:X,itemRef:X,itemScope:j,itemType:X,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:j,low:S,manifest:null,max:null,maxLength:S,media:null,method:null,min:null,minLength:S,multiple:j,muted:j,name:null,nonce:null,noModule:j,noValidate:j,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:j,optimum:S,pattern:null,ping:X,placeholder:null,playsInline:j,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:j,referrerPolicy:null,rel:X,required:j,reversed:j,rows:S,rowSpan:S,sandbox:X,scope:null,scoped:j,seamless:j,selected:j,shadowRootClonable:j,shadowRootDelegatesFocus:j,shadowRootMode:null,shape:null,size:S,sizes:null,slot:null,span:S,spellCheck:ne,src:null,srcDoc:null,srcLang:null,srcSet:null,start:S,step:null,style:null,tabIndex:S,target:null,title:null,translate:null,type:null,typeMustMatch:j,useMap:null,value:ne,width:S,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:X,axis:null,background:null,bgColor:null,border:S,borderColor:null,bottomMargin:S,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:j,declare:j,event:null,face:null,frame:null,frameBorder:null,hSpace:S,leftMargin:S,link:null,longDesc:null,lowSrc:null,marginHeight:S,marginWidth:S,noResize:j,noHref:j,noShade:j,noWrap:j,object:null,profile:null,prompt:null,rev:null,rightMargin:S,rules:null,scheme:null,scrolling:ne,standby:null,summary:null,text:null,topMargin:S,valueType:null,version:null,vAlign:null,vLink:null,vSpace:S,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:j,disableRemotePlayback:j,prefix:null,property:null,results:S,security:null,unselectable:null}}),jh=$t({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:qo,properties:{about:ke,accentHeight:S,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:S,amplitude:S,arabicForm:null,ascent:S,attributeName:null,attributeType:null,azimuth:S,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:S,by:null,calcMode:null,capHeight:S,className:X,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:S,diffuseConstant:S,direction:null,display:null,dur:null,divisor:S,dominantBaseline:null,download:j,dx:null,dy:null,edgeMode:null,editable:null,elevation:S,enableBackground:null,end:null,event:null,exponent:S,externalResourcesRequired:null,fill:null,fillOpacity:S,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Et,g2:Et,glyphName:Et,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:S,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:S,horizOriginX:S,horizOriginY:S,id:null,ideographic:S,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:S,k:S,k1:S,k2:S,k3:S,k4:S,kernelMatrix:ke,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:S,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:S,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:S,overlineThickness:S,paintOrder:null,panose1:null,path:null,pathLength:S,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:X,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:S,pointsAtY:S,pointsAtZ:S,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ke,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ke,rev:ke,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ke,requiredFeatures:ke,requiredFonts:ke,requiredFormats:ke,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:S,specularExponent:S,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:S,strikethroughThickness:S,string:null,stroke:null,strokeDashArray:ke,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:S,strokeOpacity:S,strokeWidth:null,style:null,surfaceScale:S,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ke,tabIndex:S,tableValues:null,target:null,targetX:S,targetY:S,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ke,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:S,underlineThickness:S,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:S,values:null,vAlphabetic:S,vMathematical:S,vectorEffect:null,vHanging:S,vIdeographic:S,version:null,vertAdvY:S,vertOriginX:S,vertOriginY:S,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:S,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Uh=/^data[-\w.:]+$/i,As=/-[a-z]/g,Hh=/[A-Z]/g;function Vh(e,t){const n=Dr(t);let r=t,i=Re;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Uh.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(As,Wh);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!As.test(s)){let o=s.replace(Hh,qh);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=ui}return new i(r,t)}function qh(e){return"-"+e.toLowerCase()}function Wh(e){return e.charAt(1).toUpperCase()}const Jh=jo([Vo,Ho,Jo,Xo,zh],"html"),Xh=jo([Vo,Ho,Jo,Xo,jh],"svg");function Ps(e){if(e)throw e}function Kh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vn=Object.prototype.hasOwnProperty,Ko=Object.prototype.toString,Es=Object.defineProperty,Is=Object.getOwnPropertyDescriptor,vs=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Ko.call(t)==="[object Array]"},Rs=function(t){if(!t||Ko.call(t)!=="[object Object]")return!1;var n=vn.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&vn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||vn.call(t,i)},Ts=function(t,n){Es&&n.name==="__proto__"?Es(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Os=function(t,n){if(n==="__proto__")if(vn.call(t,n)){if(Is)return Is(t,n).value}else return;return t[n]},Qh=function e(){var t,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=Os(a,n),i=Os(t,n),a!==i&&(c&&i&&(Rs(i)||(s=vs(i)))?(s?(s=!1,o=r&&vs(r)?r:[]):o=r&&Rs(r)?r:{},Ts(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Ts(a,{name:n,newValue:i}));return a};const cr=Kh(Qh);function Br(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Gh(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?Yh(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Yh(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class we extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Qt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}we.prototype.file="";we.prototype.name="";we.prototype.reason="";we.prototype.message="";we.prototype.stack="";we.prototype.column=void 0;we.prototype.line=void 0;we.prototype.ancestors=void 0;we.prototype.cause=void 0;we.prototype.fatal=void 0;we.prototype.place=void 0;we.prototype.ruleId=void 0;we.prototype.source=void 0;const Le={basename:Zh,dirname:ef,extname:tf,join:nf,sep:"/"};function Zh(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');on(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function ef(e){if(on(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function tf(e){on(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function nf(...e){let t=-1,n;for(;++t<e.length;)on(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":rf(n)}function rf(e){on(e);const t=e.codePointAt(0)===47;let n=sf(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function sf(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function on(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const of={cwd:af};function af(){return"/"}function zr(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function lf(e){if(typeof e=="string")e=new URL(e);else if(!zr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return uf(e)}function uf(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const hr=["history","path","basename","stem","extname","dirname"];class Qo{constructor(t){let n;t?zr(t)?n={path:t}:typeof t=="string"||cf(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":of.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hr.length;){const s=hr[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)hr.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Le.basename(this.path):void 0}set basename(t){dr(t,"basename"),fr(t,"basename"),this.path=Le.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Le.dirname(this.path):void 0}set dirname(t){$s(this.basename,"dirname"),this.path=Le.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Le.extname(this.path):void 0}set extname(t){if(fr(t,"extname"),$s(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Le.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){zr(t)&&(t=lf(t)),dr(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Le.basename(this.path,this.extname):void 0}set stem(t){dr(t,"stem"),fr(t,"stem"),this.path=Le.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new we(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function fr(e,t){if(e&&e.includes(Le.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Le.sep+"`")}function dr(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function $s(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function cf(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hf=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},ff={}.hasOwnProperty;class ci extends hf{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Gh()}copy(){const t=new ci;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(cr(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(gr("data",this.frozen),this.namespace[t]=n,this):ff.call(this.namespace,t)&&this.namespace[t]||void 0:t?(gr("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=yn(t),r=this.parser||this.Parser;return pr("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),pr("process",this.parser||this.Parser),mr("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yn(t),l=r.parse(a);r.run(l,a,function(c,h,d){if(c||!h||!d)return u(c);const f=h,y=r.stringify(f,d);mf(y)?d.value=y:d.result=y,u(c,d)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),pr("processSync",this.parser||this.Parser),mr("processSync",this.compiler||this.Compiler),this.process(t,i),Ms("processSync","process",n),r;function i(s,o){n=!0,Ps(s),r=o}}run(t,n,r){Fs(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=yn(n);i.run(t,l,u);function u(c,h,d){const f=h||t;c?a(c):o?o(f):r(void 0,f,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Ms("runSync","run",r),i;function s(o,a){Ps(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=yn(n),i=this.compiler||this.Compiler;return mr("stringify",i),Fs(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(gr("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=cr(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===u){d=h;break}if(d===-1)r.push([u,...c]);else if(c.length>0){let[f,...y]=c;const b=r[d][1];Br(b)&&Br(f)&&(f=cr(!0,b,f)),r[d]=[u,f,...y]}}}}const df=new ci().freeze();function pr(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mr(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function gr(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Fs(e){if(!Br(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ms(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yn(e){return pf(e)?e:new Qo(e)}function pf(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function mf(e){return typeof e=="string"||gf(e)}function gf(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Go=function(e){if(e==null)return xf;if(typeof e=="string")return bf(e);if(typeof e=="object")return Array.isArray(e)?yf(e):wf(e);if(typeof e=="function")return Wn(e);throw new Error("Expected function, string, or object as test")};function yf(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Go(e[n]);return Wn(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function wf(e){return Wn(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function bf(e){return Wn(t);function t(n){return n&&n.type===e}}function Wn(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function xf(){return!0}const _f=!0,Ls=!1,kf="skip",Sf=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=Go(t),s=r?-1:1;o(e,void 0,[])();function o(a,l,u){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return h;function h(){let d=[],f,y,b;if((!t||i(a,l,u[u.length-1]||null))&&(d=Cf(n(a,u)),d[0]===Ls))return d;if(a.children&&d[0]!==kf)for(y=(r?a.children.length:-1)+s,b=u.concat(a);y>-1&&y<a.children.length;){if(f=o(a.children[y],y,b)(),f[0]===Ls)return f;y=typeof f[1]=="number"?f[1]:y+s}return d}}};function Cf(e){return Array.isArray(e)?e:typeof e=="number"?[_f,e]:[e]}const Af=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),Sf(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}};function Pf(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Ef(e){return e.join(" ").trim()}var If=de("<div>"),vf=e=>{if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{Af(t,"element",(n,r,i)=>{const s=i;if(s===null)return;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&s&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number"&&s)return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}},Rf=vf;function Tf(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n?.type==="element"&&n?.tagName==="input")return n}return null}function yr(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n]?.type==="element"&&r++;return r}function Of(e,t,n,r){const i=Vh(r.schema,t);let s=n;i.property==="className"&&(i.property="class"),!(s==null||s!==s)&&(Array.isArray(s)&&(s=i.commaSeparated?Pf(s):Ef(s)),i.space&&i.property?e[i.property]=s:i.attribute&&(e[i.attribute]=s))}function Yo(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(t=>String(t)).join("")}var jr={}.hasOwnProperty,$f=e=>Q(Zo,{get node(){return e.node},get context(){return e.context}}),Zo=e=>Q(co,{get each(){return e.node.children},children:(t,n)=>Q(El,{get children(){return[Q(es,{get when(){return t.type==="element"},get children(){return Q(Mf,{get context(){return e.context},get index(){return n()},node:t,get parent(){return e.node}})}}),Q(es,{get when(){return t.type==="text"&&t.value!==`
`},get children(){return Q(Ff,{get context(){return e.context},get index(){return n()},node:t,get parent(){return e.node}})}})]}})}),Ff=e=>{const t=en(()=>{const n={...e.context},r=n.options,i=e.node,o={parent:e.parent},a=i.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},l=r.components&&jr.call(r.components,"text")?r.components.text:null,u=typeof l=="string";return o.key=["text",a.start.line,a.start.column,e.index].join("-"),r.sourcePos&&(o["data-sourcepos"]=Yo(a)),!u&&r.rawSourcePos&&(o.sourcePosition=i.position),u||(o.node=i),{properties:o,context:n,component:l}});return Q(En,{get when(){return t().component},get fallback(){return e.node.value},get children(){return Q(ho,ti({get component(){return t().component||"span"}},()=>t().properties))}})},Mf=e=>{const t=en(()=>{const n={...e.context},r=n.options,i=n.schema,s=e.node,o=s.tagName,a=e.parent,l={};let u=i,c;if(i.space==="html"&&o==="svg"&&(u=Xh,n.schema=u),s.properties)for(c in s.properties)jr.call(s.properties,c)&&Of(l,c,s.properties[c],n);(o==="ol"||o==="ul")&&n.listDepth++,(o==="ol"||o==="ul")&&n.listDepth--,n.schema=i;const h=s.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},d=r.components&&jr.call(r.components,o)?r.components[o]:o,f=typeof d=="string";if(l.key=[o,h.start.line,h.start.column,e.index].join("-"),o==="a"&&r.linkTarget&&(l.target=typeof r.linkTarget=="function"?r.linkTarget(String(l.href||""),s.children,typeof l.title=="string"?l.title:void 0):r.linkTarget),o==="a"&&r.transformLinkUri&&(l.href=r.transformLinkUri(String(l.href||""),s.children,typeof l.title=="string"?l.title:void 0)),!f&&o==="code"&&a.type==="element"&&a.tagName!=="pre"&&(l.inline=!0),!f&&(o==="h1"||o==="h2"||o==="h3"||o==="h4"||o==="h5"||o==="h6")&&(l.level=Number.parseInt(o.charAt(1),10)),o==="img"&&r.transformImageUri&&(l.src=r.transformImageUri(String(l.src||""),String(l.alt||""),typeof l.title=="string"?l.title:void 0)),!f&&o==="li"&&a.type==="element"){const y=Tf(s);l.checked=y?.properties?!!y.properties.checked:null,l.index=yr(a,s),l.ordered=a.tagName==="ol"}return!f&&(o==="ol"||o==="ul")&&(l.ordered=o==="ol",l.depth=n.listDepth),(o==="td"||o==="th")&&(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),f||(l.isHeader=o==="th")),!f&&o==="tr"&&a.type==="element"&&(l.isHeader=a.tagName==="thead"),r.sourcePos&&(l["data-sourcepos"]=Yo(h)),!f&&r.rawSourcePos&&(l.sourcePosition=s.position),!f&&r.includeElementIndex&&(l.index=yr(a,s),l.siblingCount=yr(a)),f||(l.node=s),{properties:l,context:n,component:d}});return Q(ho,ti({get component(){return t().component}},()=>t().properties,{get children(){return Q(Zo,{get node(){return e.node},get context(){return t().context}})}}))},Lf={renderingStrategy:"memo",remarkPlugins:[],rehypePlugins:[],class:"",unwrapDisallowed:!1,disallowedElements:void 0,allowedElements:void 0,allowElement:void 0,children:"",sourcePos:!1,rawSourcePos:!1,skipHtml:!1,includeElementIndex:!1,transformLinkUri:null,transformImageUri:void 0,linkTarget:"_self",components:{}},Df=e=>{const t=ti(Lf,e),[n,r]=$l({type:"root",children:[]}),i=en(()=>{const s=t.children,o=df().use(zc).use(t.remarkPlugins||[]).use(Dh,{allowDangerousHtml:!0}).use(t.rehypePlugins||[]).use(Rf,t),a=new Qo;typeof s=="string"?a.value=s:s!==void 0&&t.children;const l=o.runSync(o.parse(a),a);if(l.type!=="root")throw new TypeError("Expected a `root` node");return l});return t.renderingStrategy==="reconcile"&&ut(()=>{r(Fl(i()))}),(()=>{var s=If();return oe(s,Q($f,{context:{options:t,schema:Jh,listDepth:0},get node(){return uo(()=>t.renderingStrategy==="memo")()?i():n}})),ut(()=>Rt(s,t.class)),s})()},Nf=de("<textarea rows=1>"),Bf=de("<style>"),zf=de("<div>");function jf(e){const t=(Math.random()+1).toString(36).substring(2),n=()=>{const i=e.accessor();return i.endsWith(`
`)?i+".":i},r=(()=>{var i=Nf();return i.$$keydown=s=>{e.onsubmit&&s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),e.onsubmit())},i.$$input=s=>{e.setter(s.currentTarget.value)},ut(s=>{var o=e.id,a=`w-full max-w-2xl p-4 break-words resize-none overflow-hidden ${e.class||""}`,l=e.placeholder,u=e.disabled||!1;return o!==s.e&&or(i,"id",s.e=o),a!==s.t&&Rt(i,s.t=a),l!==s.a&&or(i,"placeholder",s.a=l),u!==s.o&&(i.disabled=s.o=u),s},{e:void 0,t:void 0,a:void 0,o:void 0}),ut(()=>i.value=e.accessor()),i})();return vr(()=>{e.disabled||r.focus()}),[Q(Il,{get children(){var i=Bf();return oe(i,`.grow-wrap-${t} > textarea, .grow-wrap-${t}::after {padding: 1rem; font: inherit; grid-area: 1 / 1 / 2 / 2; }`),i}}),(()=>{var i=zf();return Rt(i,`w-full grid grow-wrap-${t} after:invisible after:w-full after:max-w-2xl after:break-words after:whitespace-pre-wrap after:content-[attr(data-replicated-value)]`),oe(i,r),ut(()=>or(i,"data-replicated-value",n())),i})()]}fo(["input","keydown"]);var Uf=de('<svg class="w-8 h-8"width=800px height=800px viewBox="0 0 24 24"fill=none><path d="M10.3009 13.6949L20.102 3.89742M10.5795 14.1355L12.8019 18.5804C13.339 19.6545 13.6075 20.1916 13.9458 20.3356C14.2394 20.4606 14.575 20.4379 14.8492 20.2747C15.1651 20.0866 15.3591 19.5183 15.7472 18.3818L19.9463 6.08434C20.2845 5.09409 20.4535 4.59896 20.3378 4.27142C20.2371 3.98648 20.013 3.76234 19.7281 3.66167C19.4005 3.54595 18.9054 3.71502 17.9151 4.05315L5.61763 8.2523C4.48114 8.64037 3.91289 8.83441 3.72478 9.15032C3.56153 9.42447 3.53891 9.76007 3.66389 10.0536C3.80791 10.3919 4.34498 10.6605 5.41912 11.1975L9.86397 13.42C10.041 13.5085 10.1295 13.5527 10.2061 13.6118C10.2742 13.6643 10.3352 13.7253 10.3876 13.7933C10.4468 13.87 10.491 13.9585 10.5795 14.1355Z"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');function Hf(){return Uf()}const Ur="RFC3986",Hr={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},Vf="RFC1738",qf=Array.isArray,Me=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),wr=1024,Wf=(e,t,n,r,i)=>{if(e.length===0)return e;let s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=wr){const l=s.length>=wr?s.slice(a,a+wr):s,u=[];for(let c=0;c<l.length;++c){let h=l.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===Vf&&(h===40||h===41)){u[u.length]=l.charAt(c);continue}if(h<128){u[u.length]=Me[h];continue}if(h<2048){u[u.length]=Me[192|h>>6]+Me[128|h&63];continue}if(h<55296||h>=57344){u[u.length]=Me[224|h>>12]+Me[128|h>>6&63]+Me[128|h&63];continue}c+=1,h=65536+((h&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Me[240|h>>18]+Me[128|h>>12&63]+Me[128|h>>6&63]+Me[128|h&63]}o+=u.join("")}return o};function Jf(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Ds(e,t){if(qf(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const Xf=Object.prototype.hasOwnProperty,ea={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},De=Array.isArray,Kf=Array.prototype.push,ta=function(e,t){Kf.apply(e,De(t)?t:[t])},Qf=Date.prototype.toISOString,ie={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Wf,encodeValuesOnly:!1,format:Ur,formatter:Hr[Ur],indices:!1,serializeDate(e){return Qf.call(e)},skipNulls:!1,strictNullHandling:!1};function Gf(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const br={};function na(e,t,n,r,i,s,o,a,l,u,c,h,d,f,y,b,P,g){let _=e,k=g,E=0,$=!1;for(;(k=k.get(br))!==void 0&&!$;){const F=k.get(e);if(E+=1,typeof F<"u"){if(F===E)throw new RangeError("Cyclic object value");$=!0}typeof k.get(br)>"u"&&(E=0)}if(typeof u=="function"?_=u(t,_):_ instanceof Date?_=d?.(_):n==="comma"&&De(_)&&(_=Ds(_,function(F){return F instanceof Date?d?.(F):F})),_===null){if(s)return l&&!b?l(t,ie.encoder,P,"key",f):t;_=""}if(Gf(_)||Jf(_)){if(l){const F=b?t:l(t,ie.encoder,P,"key",f);return[y?.(F)+"="+y?.(l(_,ie.encoder,P,"value",f))]}return[y?.(t)+"="+y?.(String(_))]}const w=[];if(typeof _>"u")return w;let R;if(n==="comma"&&De(_))b&&l&&(_=Ds(_,l)),R=[{value:_.length>0?_.join(",")||null:void 0}];else if(De(u))R=u;else{const F=Object.keys(_);R=c?F.sort(c):F}const N=a?String(t).replace(/\./g,"%2E"):String(t),T=r&&De(_)&&_.length===1?N+"[]":N;if(i&&De(_)&&_.length===0)return T+"[]";for(let F=0;F<R.length;++F){const A=R[F],I=typeof A=="object"&&typeof A.value<"u"?A.value:_[A];if(o&&I===null)continue;const H=h&&a?A.replace(/\./g,"%2E"):A,J=De(_)?typeof n=="function"?n(T,H):T:T+(h?"."+H:"["+H+"]");g.set(e,E);const M=new WeakMap;M.set(br,g),ta(w,na(I,J,n,r,i,s,o,a,n==="comma"&&b&&De(_)?null:l,u,c,h,d,f,y,b,P,M))}return w}function Yf(e=ie){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||ie.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Ur;if(typeof e.format<"u"){if(!Xf.call(Hr,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=Hr[n];let i=ie.filter;(typeof e.filter=="function"||De(e.filter))&&(i=e.filter);let s;if(e.arrayFormat&&e.arrayFormat in ea?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=ie.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:ie.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ie.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ie.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ie.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?ie.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ie.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:ie.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:ie.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ie.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ie.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ie.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ie.strictNullHandling}}function Zf(e,t={}){let n=e;const r=Yf(t);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):De(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=ea[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let d=0;d<i.length;++d){const f=i[d];r.skipNulls&&n[f]===null||ta(o,na(n[f],f,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),c.length>0?h+c:""}const kt="4.104.0";let Ns=!1,Yt,ra,ia,Vr,sa,oa,aa,la,ua;function ed(e,t={auto:!1}){if(Ns)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Yt)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Yt}'\``);Ns=t.auto,Yt=e.kind,ra=e.fetch,e.Request,e.Response,e.Headers,ia=e.FormData,e.Blob,Vr=e.File,sa=e.ReadableStream,oa=e.getMultipartRequestOptions,aa=e.getDefaultAgent,la=e.fileFromPath,ua=e.isFsReadStream}class td{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function nd({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new td(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const ca=()=>{Yt||ed(nd(),{auto:!0})};ca();class O extends Error{}class ce extends O{constructor(t,n,r,i){super(`${ce.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.request_id=i?.["x-request-id"],this.error=n;const s=n;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(t,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new Jn({message:r,cause:Wr(n)});const s=n?.error;return t===400?new ha(t,s,r,i):t===401?new fa(t,s,r,i):t===403?new da(t,s,r,i):t===404?new pa(t,s,r,i):t===409?new ma(t,s,r,i):t===422?new ga(t,s,r,i):t===429?new ya(t,s,r,i):t>=500?new wa(t,s,r,i):new ce(t,s,r,i)}}class ve extends ce{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Jn extends ce{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class hi extends Jn{constructor({message:t}={}){super({message:t??"Request timed out."})}}class ha extends ce{}class fa extends ce{}class da extends ce{}class pa extends ce{}class ma extends ce{}class ga extends ce{}class ya extends ce{}class wa extends ce{}class ba extends O{constructor(){super("Could not parse response content as the length limit was reached")}}class xa extends O{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var wn=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ot=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Se;class Xn{constructor(){Se.set(this,void 0),this.buffer=new Uint8Array,wn(this,Se,null,"f")}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let s;for(;(s=rd(this.buffer,ot(this,Se,"f")))!=null;){if(s.carriage&&ot(this,Se,"f")==null){wn(this,Se,s.index,"f");continue}if(ot(this,Se,"f")!=null&&(s.index!==ot(this,Se,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,ot(this,Se,"f")-1))),this.buffer=this.buffer.slice(ot(this,Se,"f")),wn(this,Se,null,"f");continue}const o=ot(this,Se,"f")!==null?s.preceding-1:s.preceding,a=this.decodeText(this.buffer.slice(0,o));i.push(a),this.buffer=this.buffer.slice(s.index),wn(this,Se,null,"f")}return i}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new O(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new O(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new O("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Se=new WeakMap;Xn.NEWLINE_CHARS=new Set([`
`,"\r"]);Xn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function rd(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function id(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}function _a(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class je{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const o of sd(t,n))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new ce(void 0,a.error,void 0,Ia(t.headers));yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ce(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||n.abort()}}return new je(i,n)}static fromReadableStream(t,n){let r=!1;async function*i(){const o=new Xn,a=_a(t);for await(const l of a)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const a of i())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||n.abort()}}return new je(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();t.push(o),n.push(o)}return s.shift()}});return[new je(()=>i(t),this.controller),new je(()=>i(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new sa({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await n.next();if(o)return i.close();const a=r.encode(JSON.stringify(s)+`
`);i.enqueue(a)}catch(s){i.error(s)}},async cancel(){await n.return?.()}})}}async function*sd(e,t){if(!e.body)throw t.abort(),new O("Attempted to iterate over a response with no body");const n=new ad,r=new Xn,i=_a(e.body);for await(const s of od(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*od(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),t=i;let s;for(;(s=id(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}class ad{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=ld(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function ld(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}const ka=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",Sa=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Kn(e),Kn=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",ud=e=>Sa(e)||ka(e)||ua(e);async function Ca(e,t,n){if(e=await e,Sa(e))return e;if(ka(e)){const i=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=Kn(i)?[await i.arrayBuffer()]:[i];return new Vr(s,t,n)}const r=await cd(e);if(t||(t=fd(e)??"unknown_file"),!n?.type){const i=r[0]?.type;typeof i=="string"&&(n={...n,type:i})}return new Vr(r,t,n)}async function cd(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Kn(e))t.push(await e.arrayBuffer());else if(dd(e))for await(const n of e)t.push(n);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${hd(e)}`);return t}function hd(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function fd(e){return xr(e.name)||xr(e.filename)||xr(e.path)?.split(/[\\/]/).pop()}const xr=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},dd=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Bs=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",ht=async e=>{const t=await pd(e.body);return oa(t,e)},pd=async e=>{const t=new ia;return await Promise.all(Object.entries(e||{}).map(([n,r])=>qr(t,n,r))),t},qr=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(ud(n)){const r=await Ca(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>qr(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>qr(e,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var md=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},gd=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},bn;ca();async function Aa(e){const{response:t}=e;if(e.options.stream)return Ze("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):je.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const o=await t.json();return Ze("response",t.status,t.url,t.headers,o),Pa(o,t)}const s=await t.text();return Ze("response",t.status,t.url,t.headers,s),s}function Pa(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class Qn extends Promise{constructor(t,n=Aa){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new Qn(this.responsePromise,async n=>Pa(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class yd{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=t,this.maxRetries=_r("maxRetries",n),this.timeout=_r("timeout",r),this.httpAgent=i,this.fetch=s??ra}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...kd(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Pd()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&Kn(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:t,path:n,...i,body:s}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){const r={...t},{method:i,path:s,query:o,headers:a={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Bs(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,u=this.calculateContentLength(l),c=this.buildURL(s,o);"timeout"in r&&_r("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??aa(c),d=r.timeout+1e3;typeof h?.options?.timeout=="number"&&d>(h.options.timeout??0)&&(h.options.timeout=d),this.idempotencyHeader&&i!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const f=this.buildHeaders({options:r,headers:a,contentLength:u,retryCount:n});return{req:{method:i,...l&&{body:l},headers:f,...h&&{agent:h},signal:r.signal??null},url:c,timeout:r.timeout}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const o=this.defaultHeaders(t);return Hs(s,o),Hs(s,n),Bs(t.body)&&Yt!=="node"&&delete s["content-type"],_n(o,"x-stainless-retry-count")===void 0&&_n(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),_n(o,"x-stainless-timeout")===void 0&&_n(n,"x-stainless-timeout")===void 0&&t.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(t.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,i){return ce.generate(t,n,r,i)}request(t,n=null){return new Qn(this.makeRequest(t,n))}async makeRequest(t,n){const r=await t,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:o,timeout:a}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:o,options:r}),Ze("request",o,r,s.headers),r.signal?.aborted)throw new ve;const l=new AbortController,u=await this.fetchWithTimeout(o,s,a,l).catch(Wr);if(u instanceof Error){if(r.signal?.aborted)throw new ve;if(n)return this.retryRequest(r,n);throw u.name==="AbortError"?new hi:new Jn({cause:u})}const c=Ia(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){const P=`retrying, ${n} attempts remaining`;return Ze(`response (error; ${P})`,u.status,o,c),this.retryRequest(r,n,c)}const h=await u.text().catch(P=>Wr(P).message),d=Sd(h),f=d?void 0:h;throw Ze(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,o,c,f),this.makeStatusError(u.status,d,f,c)}return{response:u,options:r,controller:l}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new wd(this,r,t)}buildURL(t,n){const r=Ad(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return va(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new O(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,i){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r),l={signal:i.signal,...o};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,t,l).finally(()=>{clearTimeout(a)})}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let i;const s=r?.["retry-after-ms"];if(s){const a=parseFloat(s);Number.isNaN(a)||(i=a)}const o=r?.["retry-after"];if(o&&!i){const a=parseFloat(o);Number.isNaN(a)?i=Date.parse(o)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=t.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await an(i),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${kt}`}}class Ea{constructor(t,n,r,i){bn.set(this,void 0),md(this,bn,t,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new O("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[i,s]of r)t.url.searchParams.set(i,s);n.query=void 0,n.path=t.url.toString()}return await gd(this,bn,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(bn=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class wd extends Qn{constructor(t,n,r){super(n,async i=>new r(t,i.response,await Aa(i),i.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const Ia=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),bd={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Z=e=>typeof e=="object"&&e!==null&&!va(e)&&Object.keys(e).every(t=>Ra(bd,t)),xd=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kt,"X-Stainless-OS":js(Deno.build.os),"X-Stainless-Arch":zs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kt,"X-Stainless-OS":js(process.platform),"X-Stainless-Arch":zs(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=_d();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function _d(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:t,version:`${i}.${s}.${o}`}}}return null}const zs=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",js=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Us;const kd=()=>Us??(Us=xd()),Sd=e=>{try{return JSON.parse(e)}catch{return}},Cd=/^[a-z][a-z0-9+.-]*:/i,Ad=e=>Cd.test(e),an=e=>new Promise(t=>setTimeout(t,e)),_r=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new O(`${e} must be an integer`);if(t<0)throw new O(`${e} must be a positive integer`);return t},Wr=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},xn=e=>{if(typeof process<"u")return process.env?.[e]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(e)?.trim()};function va(e){if(!e)return!0;for(const t in e)return!1;return!0}function Ra(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Hs(e,t){for(const n in t){if(!Ra(t,n))continue;const r=n.toLowerCase();if(!r)continue;const i=t[n];i===null?delete e[r]:i!==void 0&&(e[r]=i)}}const Vs=new Set(["authorization","api-key"]);function Ze(e,...t){if(typeof process<"u"&&process?.env?.DEBUG==="true"){const n=t.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const o in r.headers)Vs.has(o.toLowerCase())&&(s.headers[o]="REDACTED");return s}let i=null;for(const s in r)Vs.has(s.toLowerCase())&&(i??(i={...r}),i[s]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${e}`,...n)}}const Pd=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Ed=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Id=e=>typeof e?.get=="function",_n=(e,t)=>{const n=t.toLowerCase();if(Id(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(i,s,o)=>s+o.toUpperCase());for(const i of[t,n,t.toUpperCase(),r]){const s=e.get(i);if(s)return s}}for(const[r,i]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${t} header, using the first entry.`),i[0]):i},vd=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function kr(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Gn extends Ea{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class se extends Ea{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const t=this.getPaginatedItems();if(!t.length)return null;const n=t[t.length-1]?.id;return n?{params:{after:n}}:null}}class L{constructor(t){this._client=t}}let Ta=class extends L{list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/chat/completions/${t}/messages`,Rd,{query:n,...r})}},Yn=class extends L{constructor(){super(...arguments),this.messages=new Ta(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(`/chat/completions/${t}`,{body:n,...r})}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/chat/completions",Zn,{query:t,...n})}del(t,n){return this._client.delete(`/chat/completions/${t}`,n)}};class Zn extends se{}class Rd extends se{}Yn.ChatCompletionsPage=Zn;Yn.Messages=Ta;let er=class extends L{constructor(){super(...arguments),this.completions=new Yn(this._client)}};er.Completions=Yn;er.ChatCompletionsPage=Zn;class Oa extends L{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class $a extends L{create(t,n){return this._client.post("/audio/transcriptions",ht({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}}))}}class Fa extends L{create(t,n){return this._client.post("/audio/translations",ht({body:t,...n,__metadata:{model:t.model}}))}}class ln extends L{constructor(){super(...arguments),this.transcriptions=new $a(this._client),this.translations=new Fa(this._client),this.speech=new Oa(this._client)}}ln.Transcriptions=$a;ln.Translations=Fa;ln.Speech=Oa;class fi extends L{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/batches",di,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class di extends se{}fi.BatchesPage=di;var Oe=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Y=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Jr,Rn,Tn,Ht,Vt,On,qt,We,Wt,Bn,zn,St,Ma;class pi{constructor(){Jr.add(this),this.controller=new AbortController,Rn.set(this,void 0),Tn.set(this,()=>{}),Ht.set(this,()=>{}),Vt.set(this,void 0),On.set(this,()=>{}),qt.set(this,()=>{}),We.set(this,{}),Wt.set(this,!1),Bn.set(this,!1),zn.set(this,!1),St.set(this,!1),Oe(this,Rn,new Promise((t,n)=>{Oe(this,Tn,t,"f"),Oe(this,Ht,n,"f")}),"f"),Oe(this,Vt,new Promise((t,n)=>{Oe(this,On,t,"f"),Oe(this,qt,n,"f")}),"f"),Y(this,Rn,"f").catch(()=>{}),Y(this,Vt,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},Y(this,Jr,"m",Ma).bind(this))},0)}_connected(){this.ended||(Y(this,Tn,"f").call(this),this._emit("connect"))}get ended(){return Y(this,Wt,"f")}get errored(){return Y(this,Bn,"f")}get aborted(){return Y(this,zn,"f")}abort(){this.controller.abort()}on(t,n){return(Y(this,We,"f")[t]||(Y(this,We,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=Y(this,We,"f")[t];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(t,n){return(Y(this,We,"f")[t]||(Y(this,We,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Oe(this,St,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Oe(this,St,!0,"f"),await Y(this,Vt,"f")}_emit(t,...n){if(Y(this,Wt,"f"))return;t==="end"&&(Oe(this,Wt,!0,"f"),Y(this,On,"f").call(this));const r=Y(this,We,"f")[t];if(r&&(Y(this,We,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),t==="abort"){const i=n[0];!Y(this,St,"f")&&!r?.length&&Promise.reject(i),Y(this,Ht,"f").call(this,i),Y(this,qt,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=n[0];!Y(this,St,"f")&&!r?.length&&Promise.reject(i),Y(this,Ht,"f").call(this,i),Y(this,qt,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Rn=new WeakMap,Tn=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,On=new WeakMap,qt=new WeakMap,We=new WeakMap,Wt=new WeakMap,Bn=new WeakMap,zn=new WeakMap,St=new WeakMap,Jr=new WeakSet,Ma=function(t){if(Oe(this,Bn,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new ve),t instanceof ve)return Oe(this,zn,!0,"f"),this._emit("abort",t);if(t instanceof O)return this._emit("error",t);if(t instanceof Error){const n=new O(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new O(String(t)))};var v=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_e=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ue,Xr,Ne,$n,$e,lt,Ct,at,jn,Ce,Fn,Mn,Zt,Jt,Xt,qs,Ws,Js,Xs,Ks,Qs,Gs;class Fe extends pi{constructor(){super(...arguments),ue.add(this),Xr.set(this,[]),Ne.set(this,{}),$n.set(this,{}),$e.set(this,void 0),lt.set(this,void 0),Ct.set(this,void 0),at.set(this,void 0),jn.set(this,void 0),Ce.set(this,void 0),Fn.set(this,void 0),Mn.set(this,void 0),Zt.set(this,void 0)}[(Xr=new WeakMap,Ne=new WeakMap,$n=new WeakMap,$e=new WeakMap,lt=new WeakMap,Ct=new WeakMap,at=new WeakMap,jn=new WeakMap,Ce=new WeakMap,Fn=new WeakMap,Mn=new WeakMap,Zt=new WeakMap,ue=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Fe;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=je.fromReadableStream(t,this.controller);for await(const s of i)v(this,ue,"m",Jt).call(this,s);if(i.controller.signal?.aborted)throw new ve;return this._addRun(v(this,ue,"m",Xt).call(this))}toReadableStream(){return new je(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i,s){const o=new Fe;return o._run(()=>o._runToolAssistantStream(t,n,r,i,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,r,i,s){const o=s?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},l=await t.submitToolOutputs(n,r,a,{...s,signal:this.controller.signal});this._connected();for await(const u of l)v(this,ue,"m",Jt).call(this,u);if(l.controller.signal?.aborted)throw new ve;return this._addRun(v(this,ue,"m",Xt).call(this))}static createThreadAssistantStream(t,n,r){const i=new Fe;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,n,r,i){const s=new Fe;return s._run(()=>s._runAssistantStream(t,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return v(this,Fn,"f")}currentRun(){return v(this,Mn,"f")}currentMessageSnapshot(){return v(this,$e,"f")}currentRunStepSnapshot(){return v(this,Zt,"f")}async finalRunSteps(){return await this.done(),Object.values(v(this,Ne,"f"))}async finalMessages(){return await this.done(),Object.values(v(this,$n,"f"))}async finalRun(){if(await this.done(),!v(this,lt,"f"))throw Error("Final run was not received.");return v(this,lt,"f")}async _createThreadAssistantStream(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await t.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const a of o)v(this,ue,"m",Jt).call(this,a);if(o.controller.signal?.aborted)throw new ve;return this._addRun(v(this,ue,"m",Xt).call(this))}async _createAssistantStream(t,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await t.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const l of a)v(this,ue,"m",Jt).call(this,l);if(a.controller.signal?.aborted)throw new ve;return this._addRun(v(this,ue,"m",Xt).call(this))}static accumulateDelta(t,n){for(const[r,i]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let s=t[r];if(s==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(kr(s)&&kr(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!kr(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);t[r]=s}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,i){return await this._createAssistantStream(n,t,r,i)}async _runToolAssistantStream(t,n,r,i,s){return await this._createToolAssistantStream(r,t,n,i,s)}}Jt=function(t){if(!this.ended)switch(_e(this,Fn,t,"f"),v(this,ue,"m",Js).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":v(this,ue,"m",Gs).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":v(this,ue,"m",Ws).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":v(this,ue,"m",qs).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Xt=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");if(!v(this,lt,"f"))throw Error("Final run has not been received");return v(this,lt,"f")},qs=function(t){const[n,r]=v(this,ue,"m",Ks).call(this,t,v(this,$e,"f"));_e(this,$e,n,"f"),v(this,$n,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=v(this,Ct,"f")){if(v(this,at,"f"))switch(v(this,at,"f").type){case"text":this._emit("textDone",v(this,at,"f").text,v(this,$e,"f"));break;case"image_file":this._emit("imageFileDone",v(this,at,"f").image_file,v(this,$e,"f"));break}_e(this,Ct,i.index,"f")}_e(this,at,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(v(this,Ct,"f")!==void 0){const i=t.data.content[v(this,Ct,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,v(this,$e,"f"));break;case"text":this._emit("textDone",i.text,v(this,$e,"f"));break}}v(this,$e,"f")&&this._emit("messageDone",t.data),_e(this,$e,void 0,"f")}},Ws=function(t){const n=v(this,ue,"m",Xs).call(this,t);switch(_e(this,Zt,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==v(this,jn,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(v(this,Ce,"f")&&this._emit("toolCallDone",v(this,Ce,"f")),_e(this,jn,s.index,"f"),_e(this,Ce,n.step_details.tool_calls[s.index],"f"),v(this,Ce,"f")&&this._emit("toolCallCreated",v(this,Ce,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_e(this,Zt,void 0,"f"),t.data.step_details.type=="tool_calls"&&v(this,Ce,"f")&&(this._emit("toolCallDone",v(this,Ce,"f")),_e(this,Ce,void 0,"f")),this._emit("runStepDone",t.data,n);break}},Js=function(t){v(this,Xr,"f").push(t),this._emit("event",t)},Xs=function(t){switch(t.event){case"thread.run.step.created":return v(this,Ne,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=v(this,Ne,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const i=Fe.accumulateDelta(n,r.delta);v(this,Ne,"f")[t.data.id]=i}return v(this,Ne,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":v(this,Ne,"f")[t.data.id]=t.data;break}if(v(this,Ne,"f")[t.data.id])return v(this,Ne,"f")[t.data.id];throw new Error("No snapshot available")},Ks=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=v(this,ue,"m",Qs).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Qs=function(t,n){return Fe.accumulateDelta(n,t)},Gs=function(t){switch(_e(this,Mn,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":_e(this,lt,t.data,"f"),v(this,Ce,"f")&&(this._emit("toolCallDone",v(this,Ce,"f")),_e(this,Ce,void 0,"f"));break}};class mi extends L{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/assistants",gi,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class gi extends se{}mi.AssistantsPage=gi;function Ys(e){return typeof e.parse=="function"}const It=e=>e?.role==="assistant",La=e=>e?.role==="function",Da=e=>e?.role==="tool";function yi(e){return e?.$brand==="auto-parseable-response-format"}function un(e){return e?.$brand==="auto-parseable-tool"}function Td(e,t){return!t||!Na(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:wi(e,t)}function wi(e,t){const n=e.choices.map(r=>{if(r.finish_reason==="length")throw new ba;if(r.finish_reason==="content_filter")throw new xa;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>$d(t,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Od(t,r.message.content):null}}});return{...e,choices:n}}function Od(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function $d(e,t){const n=e.tools?.find(r=>r.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:un(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function Fd(e,t){if(!e)return!1;const n=e.tools?.find(r=>r.function?.name===t.function.name);return un(n)||n?.function.strict||!1}function Na(e){return yi(e.response_format)?!0:e.tools?.some(t=>un(t)||t.type==="function"&&t.function.strict===!0)??!1}function Md(e){for(const t of e??[]){if(t.type!=="function")throw new O(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new O(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ge=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},fe,Kr,Un,Qr,Gr,Yr,Ba,Zr;const Zs=10;class za extends pi{constructor(){super(...arguments),fe.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(La(t)||Da(t))&&t.content)this._emit("functionCallResult",t.content);else if(It(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(It(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new O("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),ge(this,fe,"m",Kr).call(this)}async finalMessage(){return await this.done(),ge(this,fe,"m",Un).call(this)}async finalFunctionCall(){return await this.done(),ge(this,fe,"m",Qr).call(this)}async finalFunctionCallResult(){return await this.done(),ge(this,fe,"m",Gr).call(this)}async totalUsage(){return await this.done(),ge(this,fe,"m",Yr).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=ge(this,fe,"m",Un).call(this);n&&this._emit("finalMessage",n);const r=ge(this,fe,"m",Kr).call(this);r&&this._emit("finalContent",r);const i=ge(this,fe,"m",Qr).call(this);i&&this._emit("finalFunctionCall",i);const s=ge(this,fe,"m",Gr).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",ge(this,fe,"m",Yr).call(this))}async _createChatCompletion(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ge(this,fe,"m",Ba).call(this,n);const s=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(wi(s,n))}async _runChatCompletion(t,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){const i="function",{function_call:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s?.name,{maxChatCompletions:u=Zs}=r||{},c={};for(const d of n.functions)c[d.name||d.function.name]=d;const h=n.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of n.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const y=(await this._createChatCompletion(t,{...a,function_call:s,functions:h,messages:[...this.messages]},r)).choices[0]?.message;if(!y)throw new O("missing message in ChatCompletion response");if(!y.function_call)return;const{name:b,arguments:P}=y.function_call,g=c[b];if(g){if(l&&l!==b){const $=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:b,content:$});continue}}else{const $=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${h.map(w=>JSON.stringify(w.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:b,content:$});continue}let _;try{_=Ys(g)?await g.parse(P):P}catch($){this._addMessage({role:i,name:b,content:$ instanceof Error?$.message:String($)});continue}const k=await g.function(_,this),E=ge(this,fe,"m",Zr).call(this,k);if(this._addMessage({role:i,name:b,content:E}),l)return}}async _runTools(t,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s?.function?.name,{maxChatCompletions:u=Zs}=r||{},c=n.tools.map(f=>{if(un(f)){if(!f.$callback)throw new O("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:f.$callback,name:f.function.name,description:f.function.description||"",parameters:f.function.parameters,parse:f.$parseRaw,strict:!0}}}return f}),h={};for(const f of c)f.type==="function"&&(h[f.function.name||f.function.function.name]=f.function);const d="tools"in n?c.map(f=>f.type==="function"?{type:"function",function:{name:f.function.name||f.function.function.name,parameters:f.function.parameters,description:f.function.description,strict:f.function.strict}}:f):void 0;for(const f of n.messages)this._addMessage(f,!1);for(let f=0;f<u;++f){const b=(await this._createChatCompletion(t,{...a,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0]?.message;if(!b)throw new O("missing message in ChatCompletion response");if(!b.tool_calls?.length)return;for(const P of b.tool_calls){if(P.type!=="function")continue;const g=P.id,{name:_,arguments:k}=P.function,E=h[_];if(E){if(l&&l!==_){const N=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:g,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(h).map(T=>JSON.stringify(T)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:g,content:N});continue}let $;try{$=Ys(E)?await E.parse(k):k}catch(N){const T=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:g,content:T});continue}const w=await E.function($,this),R=ge(this,fe,"m",Zr).call(this,w);if(this._addMessage({role:i,tool_call_id:g,content:R}),l)return}}}}fe=new WeakSet,Kr=function(){return ge(this,fe,"m",Un).call(this).content??null},Un=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(It(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new O("stream ended without producing a ChatCompletionMessage with role=assistant")},Qr=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(It(n)&&n?.function_call)return n.function_call;if(It(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},Gr=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(La(n)&&n.content!=null||Da(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},Yr=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Ba=function(t){if(t.n!=null&&t.n>1)throw new O("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Zr=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class nn extends za{static runFunctions(t,n,r){const i=new nn,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new nn,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}_addMessage(t,n=!0){super._addMessage(t,n),It(t)&&t.content&&this._emit("content",t.content)}}const ja=1,Ua=2,Ha=4,Va=8,qa=16,Wa=32,Ja=64,Xa=128,Ka=256,Qa=Xa|Ka,Ga=qa|Wa|Qa|Ja,Ya=ja|Ua|Ga,Za=Ha|Va,Ld=Ya|Za,ae={STR:ja,NUM:Ua,ARR:Ha,OBJ:Va,NULL:qa,BOOL:Wa,NAN:Ja,INFINITY:Xa,MINUS_INFINITY:Ka,INF:Qa,SPECIAL:Ga,ATOM:Ya,COLLECTION:Za,ALL:Ld};class Dd extends Error{}class Nd extends Error{}function Bd(e,t=ae.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return zd(e.trim(),t)}const zd=(e,t)=>{const n=e.length;let r=0;const i=d=>{throw new Dd(`${d} at position ${r}`)},s=d=>{throw new Nd(`${d} at position ${r}`)},o=()=>(h(),r>=n&&i("Unexpected end of input"),e[r]==='"'?a():e[r]==="{"?l():e[r]==="["?u():e.substring(r,r+4)==="null"||ae.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||ae.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||ae.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||ae.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||ae.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||ae.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):c()),a=()=>{const d=r;let f=!1;for(r++;r<n&&(e[r]!=='"'||f&&e[r-1]==="\\");)f=e[r]==="\\"?!f:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(d,++r-Number(f)))}catch(y){s(String(y))}else if(ae.STR&t)try{return JSON.parse(e.substring(d,r-Number(f))+'"')}catch{return JSON.parse(e.substring(d,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,h();const d={};try{for(;e[r]!=="}";){if(h(),r>=n&&ae.OBJ&t)return d;const f=a();h(),r++;try{const y=o();Object.defineProperty(d,f,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(ae.OBJ&t)return d;throw y}h(),e[r]===","&&r++}}catch{if(ae.OBJ&t)return d;i("Expected '}' at end of object")}return r++,d},u=()=>{r++;const d=[];try{for(;e[r]!=="]";)d.push(o()),h(),e[r]===","&&r++}catch{if(ae.ARR&t)return d;i("Expected ']' at end of array")}return r++,d},c=()=>{if(r===0){e==="-"&&ae.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(f){if(ae.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}s(String(f))}}const d=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(ae.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(e.substring(d,r))}catch{e.substring(d,r)==="-"&&ae.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(d,e.lastIndexOf("e")))}catch(y){s(String(y))}}},h=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},eo=e=>Bd(e,ae.ALL^ae.NUM);var yt=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},q=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},re,qe,wt,Qe,Sr,kn,Cr,Ar,Pr,Sn,Er,to;class rn extends za{constructor(t){super(),re.add(this),qe.set(this,void 0),wt.set(this,void 0),Qe.set(this,void 0),yt(this,qe,t,"f"),yt(this,wt,[],"f")}get currentChatCompletionSnapshot(){return q(this,Qe,"f")}static fromReadableStream(t){const n=new rn(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const i=new rn(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),q(this,re,"m",Sr).call(this);const s=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)q(this,re,"m",Cr).call(this,o);if(s.controller.signal?.aborted)throw new ve;return this._addChatCompletion(q(this,re,"m",Sn).call(this))}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),q(this,re,"m",Sr).call(this),this._connected();const i=je.fromReadableStream(t,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(q(this,re,"m",Sn).call(this)),q(this,re,"m",Cr).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new ve;return this._addChatCompletion(q(this,re,"m",Sn).call(this))}[(qe=new WeakMap,wt=new WeakMap,Qe=new WeakMap,re=new WeakSet,Sr=function(){this.ended||yt(this,Qe,void 0,"f")},kn=function(n){let r=q(this,wt,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},q(this,wt,"f")[n.index]=r,r)},Cr=function(n){if(this.ended)return;const r=q(this,re,"m",to).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const s=r.choices[i.index];i.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),i.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),i.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),i.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});const o=q(this,re,"m",kn).call(this,s);s.finish_reason&&(q(this,re,"m",Pr).call(this,s),o.current_tool_call_index!=null&&q(this,re,"m",Ar).call(this,s,o.current_tool_call_index));for(const a of i.delta.tool_calls??[])o.current_tool_call_index!==a.index&&(q(this,re,"m",Pr).call(this,s),o.current_tool_call_index!=null&&q(this,re,"m",Ar).call(this,s,o.current_tool_call_index)),o.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const l=s.message.tool_calls?.[a.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:a.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(l?.type,void 0))}}},Ar=function(n,r){if(q(this,re,"m",kn).call(this,n).done_tool_calls.has(r))return;const s=n.message.tool_calls?.[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const o=q(this,qe,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:un(o)?o.$parseRaw(s.function.arguments):o?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Pr=function(n){const r=q(this,re,"m",kn).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=q(this,re,"m",Er).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Sn=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const n=q(this,Qe,"f");if(!n)throw new O("request ended without sending any chunks");return yt(this,Qe,void 0,"f"),yt(this,wt,[],"f"),jd(n,q(this,qe,"f"))},Er=function(){const n=q(this,qe,"f")?.response_format;return yi(n)?n:null},to=function(n){var r,i,s,o;let a=q(this,Qe,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=yt(this,Qe,{...u,choices:[]},"f");for(const{delta:c,finish_reason:h,index:d,logprobs:f=null,...y}of n.choices){let b=a.choices[d];if(b||(b=a.choices[d]={finish_reason:h,index:d,message:{},logprobs:f,...y}),f)if(!b.logprobs)b.logprobs=Object.assign({},f);else{const{content:w,refusal:R,...N}=f;Object.assign(b.logprobs,N),w&&((r=b.logprobs).content??(r.content=[]),b.logprobs.content.push(...w)),R&&((i=b.logprobs).refusal??(i.refusal=[]),b.logprobs.refusal.push(...R))}if(h&&(b.finish_reason=h,q(this,qe,"f")&&Na(q(this,qe,"f")))){if(h==="length")throw new ba;if(h==="content_filter")throw new xa}if(Object.assign(b,y),!c)continue;const{content:P,refusal:g,function_call:_,role:k,tool_calls:E,...$}=c;if(Object.assign(b.message,$),g&&(b.message.refusal=(b.message.refusal||"")+g),k&&(b.message.role=k),_&&(b.message.function_call?(_.name&&(b.message.function_call.name=_.name),_.arguments&&((s=b.message.function_call).arguments??(s.arguments=""),b.message.function_call.arguments+=_.arguments)):b.message.function_call=_),P&&(b.message.content=(b.message.content||"")+P,!b.message.refusal&&q(this,re,"m",Er).call(this)&&(b.message.parsed=eo(b.message.content))),E){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:w,id:R,type:N,function:T,...F}of E){const A=(o=b.message.tool_calls)[w]??(o[w]={});Object.assign(A,F),R&&(A.id=R),N&&(A.type=N),T&&(A.function??(A.function={name:T.name??"",arguments:""})),T?.name&&(A.function.name=T.name),T?.arguments&&(A.function.arguments+=T.arguments,Fd(q(this,qe,"f"),A)&&(A.function.parsed_arguments=eo(A.function.arguments)))}}}return a},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new je(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function jd(e,t){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=e,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:h,logprobs:d,...f})=>{if(!c)throw new O(`missing finish_reason for choice ${h}`);const{content:y=null,function_call:b,tool_calls:P,...g}=u,_=u.role;if(!_)throw new O(`missing role for choice ${h}`);if(b){const{arguments:k,name:E}=b;if(k==null)throw new O(`missing function_call.arguments for choice ${h}`);if(!E)throw new O(`missing function_call.name for choice ${h}`);return{...f,message:{content:y,function_call:{arguments:k,name:E},role:_,refusal:u.refusal??null},finish_reason:c,index:h,logprobs:d}}return P?{...f,index:h,finish_reason:c,logprobs:d,message:{...g,role:_,content:y,refusal:u.refusal??null,tool_calls:P.map((k,E)=>{const{function:$,type:w,id:R,...N}=k,{arguments:T,name:F,...A}=$||{};if(R==null)throw new O(`missing choices[${h}].tool_calls[${E}].id
${Cn(e)}`);if(w==null)throw new O(`missing choices[${h}].tool_calls[${E}].type
${Cn(e)}`);if(F==null)throw new O(`missing choices[${h}].tool_calls[${E}].function.name
${Cn(e)}`);if(T==null)throw new O(`missing choices[${h}].tool_calls[${E}].function.arguments
${Cn(e)}`);return{...N,id:R,type:w,function:{...A,name:F,arguments:T}}})}}:{...f,message:{...g,content:y,role:_,refusal:u.refusal??null},finish_reason:c,index:h,logprobs:d}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Td(l,t)}function Cn(e){return JSON.stringify(e)}class vt extends rn{static fromReadableStream(t){const n=new vt(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const i=new vt(null),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new vt(n),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}}let el=class extends L{parse(t,n){return Md(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>wi(r,t))}runFunctions(t,n){return t.stream?vt.runFunctions(this._client,t,n):nn.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?vt.runTools(this._client,t,n):nn.runTools(this._client,t,n)}stream(t,n){return rn.createChatCompletion(this._client,t,n)}};class ei extends L{constructor(){super(...arguments),this.completions=new el(this._client)}}(function(e){e.Completions=el})(ei||(ei={}));class tl extends L{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class nl extends L{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class tr extends L{constructor(){super(...arguments),this.sessions=new tl(this._client),this.transcriptionSessions=new nl(this._client)}}tr.Sessions=tl;tr.TranscriptionSessions=nl;class bi extends L{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,xi,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class xi extends se{}bi.MessagesPage=xi;class _i extends L{retrieve(t,n,r,i={},s){return Z(i)?this.retrieve(t,n,r,{},i):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(t,n,r={},i){return Z(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,ki,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class ki extends se{}_i.RunStepsPage=ki;let cn=class extends L{constructor(){super(...arguments),this.steps=new _i(this._client)}create(t,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,Si,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}createAndStream(t,n,r){return Fe.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(t,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await an(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,n,r){return Fe.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,i){const s=await this.submitToolOutputs(t,n,r,i);return await this.poll(t,s.id,i)}submitToolOutputsStream(t,n,r,i){return Fe.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,i)}};class Si extends se{}cn.RunsPage=Si;cn.Steps=_i;cn.RunStepsPage=ki;class Ft extends L{constructor(){super(...arguments),this.runs=new cn(this._client),this.messages=new bi(this._client)}create(t={},n){return Z(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return Fe.createThreadAssistantStream(t,this._client.beta.threads,n)}}Ft.Runs=cn;Ft.RunsPage=Si;Ft.Messages=bi;Ft.MessagesPage=xi;class Mt extends L{constructor(){super(...arguments),this.realtime=new tr(this._client),this.chat=new ei(this._client),this.assistants=new mi(this._client),this.threads=new Ft(this._client)}}Mt.Realtime=tr;Mt.Assistants=mi;Mt.AssistantsPage=gi;Mt.Threads=Ft;class rl extends L{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class il extends L{retrieve(t,n,r){return this._client.get(`/containers/${t}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let nr=class extends L{constructor(){super(...arguments),this.content=new il(this._client)}create(t,n,r){return this._client.post(`/containers/${t}/files`,ht({body:n,...r}))}retrieve(t,n,r){return this._client.get(`/containers/${t}/files/${n}`,r)}list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/containers/${t}/files`,Ci,{query:n,...r})}del(t,n,r){return this._client.delete(`/containers/${t}/files/${n}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class Ci extends se{}nr.FileListResponsesPage=Ci;nr.Content=il;class hn extends L{constructor(){super(...arguments),this.files=new nr(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(`/containers/${t}`,n)}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/containers",Ai,{query:t,...n})}del(t,n){return this._client.delete(`/containers/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Ai extends se{}hn.ContainerListResponsesPage=Ai;hn.Files=nr;hn.FileListResponsesPage=Ci;class sl extends L{create(t,n){const r=!!t.encoding_format;let i=r?t.encoding_format:"base64";r&&Ze("Request","User defined encoding_format:",t.encoding_format);const s=this._client.post("/embeddings",{body:{...t,encoding_format:i},...n});return r?s:(Ze("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=vd(l)}),o)))}}class Pi extends L{retrieve(t,n,r,i){return this._client.get(`/evals/${t}/runs/${n}/output_items/${r}`,i)}list(t,n,r={},i){return Z(r)?this.list(t,n,{},r):this._client.getAPIList(`/evals/${t}/runs/${n}/output_items`,Ei,{query:r,...i})}}class Ei extends se{}Pi.OutputItemListResponsesPage=Ei;class fn extends L{constructor(){super(...arguments),this.outputItems=new Pi(this._client)}create(t,n,r){return this._client.post(`/evals/${t}/runs`,{body:n,...r})}retrieve(t,n,r){return this._client.get(`/evals/${t}/runs/${n}`,r)}list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/evals/${t}/runs`,Ii,{query:n,...r})}del(t,n,r){return this._client.delete(`/evals/${t}/runs/${n}`,r)}cancel(t,n,r){return this._client.post(`/evals/${t}/runs/${n}`,r)}}class Ii extends se{}fn.RunListResponsesPage=Ii;fn.OutputItems=Pi;fn.OutputItemListResponsesPage=Ei;class dn extends L{constructor(){super(...arguments),this.runs=new fn(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(`/evals/${t}`,n)}update(t,n,r){return this._client.post(`/evals/${t}`,{body:n,...r})}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/evals",vi,{query:t,...n})}del(t,n){return this._client.delete(`/evals/${t}`,n)}}class vi extends se{}dn.EvalListResponsesPage=vi;dn.Runs=fn;dn.RunListResponsesPage=Ii;let Ri=class extends L{create(t,n){return this._client.post("/files",ht({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/files",Ti,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,n)}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(t);for(;!o.status||!i.has(o.status);)if(await an(n),o=await this.retrieve(t),Date.now()-s>r)throw new hi({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return o}};class Ti extends se{}Ri.FileObjectsPage=Ti;class ol extends L{}let al=class extends L{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class Oi extends L{constructor(){super(...arguments),this.graders=new al(this._client)}}Oi.Graders=al;class $i extends L{create(t,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${t}/permissions`,Fi,{body:n,method:"post",...r})}retrieve(t,n={},r){return Z(n)?this.retrieve(t,{},n):this._client.get(`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...r})}del(t,n,r){return this._client.delete(`/fine_tuning/checkpoints/${t}/permissions/${n}`,r)}}class Fi extends Gn{}$i.PermissionCreateResponsesPage=Fi;let rr=class extends L{constructor(){super(...arguments),this.permissions=new $i(this._client)}};rr.Permissions=$i;rr.PermissionCreateResponsesPage=Fi;class Mi extends L{list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Li,{query:n,...r})}}class Li extends se{}Mi.FineTuningJobCheckpointsPage=Li;class Lt extends L{constructor(){super(...arguments),this.checkpoints=new Mi(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Di,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return Z(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Ni,{query:n,...r})}pause(t,n){return this._client.post(`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(`/fine_tuning/jobs/${t}/resume`,n)}}class Di extends se{}class Ni extends se{}Lt.FineTuningJobsPage=Di;Lt.FineTuningJobEventsPage=Ni;Lt.Checkpoints=Mi;Lt.FineTuningJobCheckpointsPage=Li;class nt extends L{constructor(){super(...arguments),this.methods=new ol(this._client),this.jobs=new Lt(this._client),this.checkpoints=new rr(this._client),this.alpha=new Oi(this._client)}}nt.Methods=ol;nt.Jobs=Lt;nt.FineTuningJobsPage=Di;nt.FineTuningJobEventsPage=Ni;nt.Checkpoints=rr;nt.Alpha=Oi;class ll extends L{}class Bi extends L{constructor(){super(...arguments),this.graderModels=new ll(this._client)}}Bi.GraderModels=ll;class ul extends L{createVariation(t,n){return this._client.post("/images/variations",ht({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",ht({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}class zi extends L{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",ji,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class ji extends Gn{}zi.ModelsPage=ji;class cl extends L{create(t,n){return this._client.post("/moderations",{body:t,...n})}}function Ud(e,t){return!t||!Vd(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:hl(e,t)}function hl(e,t){const n=e.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Jd(t,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:Hd(t,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||fl(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Hd(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function Vd(e){return!!yi(e.text?.format)}function qd(e){return e?.$brand==="auto-parseable-tool"}function Wd(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function Jd(e,t){const n=Wd(e.tools??[],t.name);return{...t,...t,parsed_arguments:qd(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function fl(e){const t=[];for(const n of e.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&t.push(r.text);e.output_text=t.join("")}class dl extends L{list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/responses/${t}/input_items`,Kd,{query:n,...r})}}var bt=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ge=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},xt,An,Ye,Pn,no,ro,io,so;class Ui extends pi{constructor(t){super(),xt.add(this),An.set(this,void 0),Ye.set(this,void 0),Pn.set(this,void 0),bt(this,An,t,"f")}static createResponse(t,n,r){const i=new Ui(n);return i._run(()=>i._createOrRetrieveResponse(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ge(this,xt,"m",no).call(this);let s,o=null;"response_id"in n?(s=await t.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await t.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of s)Ge(this,xt,"m",ro).call(this,a,o);if(s.controller.signal?.aborted)throw new ve;return Ge(this,xt,"m",io).call(this)}[(An=new WeakMap,Ye=new WeakMap,Pn=new WeakMap,xt=new WeakSet,no=function(){this.ended||bt(this,Ye,void 0,"f")},ro=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=Ge(this,xt,"m",so).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new O(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new O(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new O(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new O(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},io=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const n=Ge(this,Ye,"f");if(!n)throw new O("request ended without sending any events");bt(this,Ye,void 0,"f");const r=Xd(n,Ge(this,An,"f"));return bt(this,Pn,r,"f"),r},so=function(n){let r=Ge(this,Ye,"f");if(!r){if(n.type!=="response.created")throw new O(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=bt(this,Ye,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new O(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new O(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new O(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new O(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new O(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{bt(this,Ye,n.response,"f");break}}return r},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=Ge(this,Pn,"f");if(!t)throw new O("stream ended without producing a ChatCompletion");return t}}function Xd(e,t){return Ud(e,t)}class Hi extends L{constructor(){super(...arguments),this.inputItems=new dl(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&fl(r),r))}retrieve(t,n={},r){return this._client.get(`/responses/${t}`,{query:n,...r,stream:n?.stream??!1})}del(t,n){return this._client.delete(`/responses/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(r=>hl(r,t))}stream(t,n){return Ui.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(`/responses/${t}/cancel`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Kd extends se{}Hi.InputItems=dl;class pl extends L{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,ht({body:n,...r}))}}class Vi extends L{constructor(){super(...arguments),this.parts=new pl(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}Vi.Parts=pl;const Qd=async e=>{const t=await Promise.allSettled(e),n=t.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of t)i.status==="fulfilled"&&r.push(i.value);return r};class ir extends L{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(t,n,r,i){return this._client.post(`/vector_stores/${t}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(t,n={},r){return Z(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,sr,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}async poll(t,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(t,n,{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const l=s.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await an(a);break;case"failed":case"completed":return o}}}async upload(t,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:i.id},r)}async uploadAndPoll(t,n,r){const i=await this.upload(t,n,r);return await this.poll(t,i.id,r)}content(t,n,r){return this._client.getAPIList(`/vector_stores/${t}/files/${n}/content`,qi,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class sr extends se{}class qi extends Gn{}ir.VectorStoreFilesPage=sr;ir.FileContentResponsesPage=qi;class ml extends L{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n);return await this.poll(t,i.id,r)}listFiles(t,n,r={},i){return Z(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,sr,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(t,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(t,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await an(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=i?.maxConcurrency??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(d){for(let f of d){const y=await a.files.create({file:f,purpose:"assistants"},i);u.push(y.id)}}const h=Array(o).fill(l).map(c);return await Qd(h),await this.createAndPoll(t,{file_ids:u})}}class rt extends L{constructor(){super(...arguments),this.files=new ir(this._client),this.fileBatches=new ml(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(t={},n){return Z(t)?this.list({},t):this._client.getAPIList("/vector_stores",Wi,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}search(t,n,r){return this._client.getAPIList(`/vector_stores/${t}/search`,Ji,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Wi extends se{}class Ji extends Gn{}rt.VectorStoresPage=Wi;rt.VectorStoreSearchResponsesPage=Ji;rt.Files=ir;rt.VectorStoreFilesPage=sr;rt.FileContentResponsesPage=qi;rt.FileBatches=ml;var gl;class B extends yd{constructor({baseURL:t=xn("OPENAI_BASE_URL"),apiKey:n=xn("OPENAI_API_KEY"),organization:r=xn("OPENAI_ORG_ID")??null,project:i=xn("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new O("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:i,...s,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Ed())throw new O(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new rl(this),this.chat=new er(this),this.embeddings=new sl(this),this.files=new Ri(this),this.images=new ul(this),this.audio=new ln(this),this.moderations=new cl(this),this.models=new zi(this),this.fineTuning=new nt(this),this.graders=new Bi(this),this.vectorStores=new rt(this),this.beta=new Mt(this),this.batches=new fi(this),this.uploads=new Vi(this),this.responses=new Hi(this),this.evals=new dn(this),this.containers=new hn(this),this._options=o,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return Zf(t,{arrayFormat:"brackets"})}}gl=B;B.OpenAI=gl;B.DEFAULT_TIMEOUT=6e5;B.OpenAIError=O;B.APIError=ce;B.APIConnectionError=Jn;B.APIConnectionTimeoutError=hi;B.APIUserAbortError=ve;B.NotFoundError=pa;B.ConflictError=ma;B.RateLimitError=ya;B.BadRequestError=ha;B.AuthenticationError=fa;B.InternalServerError=wa;B.PermissionDeniedError=da;B.UnprocessableEntityError=ga;B.toFile=Ca;B.fileFromPath=la;B.Completions=rl;B.Chat=er;B.ChatCompletionsPage=Zn;B.Embeddings=sl;B.Files=Ri;B.FileObjectsPage=Ti;B.Images=ul;B.Audio=ln;B.Moderations=cl;B.Models=zi;B.ModelsPage=ji;B.FineTuning=nt;B.Graders=Bi;B.VectorStores=rt;B.VectorStoresPage=Wi;B.VectorStoreSearchResponsesPage=Ji;B.Beta=Mt;B.Batches=fi;B.BatchesPage=di;B.Uploads=Vi;B.Responses=Hi;B.Evals=dn;B.EvalListResponsesPage=vi;B.Containers=hn;B.ContainerListResponsesPage=Ai;const Gd=B;function Yd(){let e=localStorage.getItem("sessionId");return e||(e=crypto.randomUUID(),localStorage.setItem("sessionId",e)),e}async function Zd(){const e=await fetch("https://api.ipify.org?format=json").then(i=>i.json()).then(i=>i.ip),n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}async function oo(e){const t=Yd(),n=await Zd(),r=new Date().toISOString();console.log("Speichern ausgelöst für:",e),await fetch("/api/saveMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t,ipHash:n,message:e,timestamp:r})})}class ep{openai;prompted;constructor(t){this.openai=new Gd({baseURL:"https://verifizierung-studie.pages.dev/openai/v1/",dangerouslyAllowBrowser:!0,apiKey:"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"}),this.prompted=t}sendMessage(t,n){const[r,i]=Be(""),[s,o]=Be(!1),[a,l]=Be(null),u=async()=>{try{const h=[];this.prompted&&h.push({role:"system",content:`You are a helpful assistant following these rules:
- Aim for a conversational tone.
- Start by asking open-ended questions to gather necessary information for the task.
- Avoid asking overly broad questions or presenting more than 2 different questions at once.
- Rephrase your questions or provide more context if the user's answers are unclear.
- Avoid asking general questions like "Still questions?" or "What do you think?".
- Provide examples or recommendations only when requested by the user.
- Keep responses concise and relevant to the user's needs.
- Avoid overwhelming the user with too much information at once.
- All following chat will be in German.
`});for(let y of t)y.role==="assistant"?h.push({role:"assistant",content:y.content()}):h.push({role:y.role,content:y.content});h.push({role:"user",content:n}),await oo(n);const d=await this.openai.chat.completions.create({messages:h,model:"gpt-4o-2024-11-20",stream:!0});let f="";for await(const y of d){const b=y.choices[0]?.delta?.content||"";f+=b,i(P=>P+b)}await oo(f),o(!0)}catch(h){o(!0),l(String(h))}},c=async()=>{if(!s())throw new Error("Cannot restart when it isn't done!");o(!1),l(null),i(""),await u()};return u(),{time:Date.now(),role:"assistant",content:r,done:s,error:a,retry:c}}}var tp=de('<svg class="w-8 h-8"width=800px height=800px viewBox="0 0 24 24"fill=none><path d="M3 3V8M3 8H8M3 8L6 5.29168C7.59227 3.86656 9.69494 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.71683 21 4.13247 18.008 3.22302 14"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');function np(){return tp()}function ao(e,t,n){const r=new Blob(e,{type:t}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}var rp=de('<svg class="w-8 h-8"width=800px height=800px viewBox="0 0 24 24"fill=none><path d="M9 3V5M12 3V5M15 3V5M13 9H9M15 13H9M8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V7.2C19 6.0799 19 5.51984 18.782 5.09202C18.5903 4.71569 18.2843 4.40973 17.908 4.21799C17.4802 4 16.9201 4 15.8 4H8.2C7.0799 4 6.51984 4 6.09202 4.21799C5.71569 4.40973 5.40973 4.71569 5.21799 5.09202C5 5.51984 5 6.07989 5 7.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21Z"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');function ip(){return rp()}var sp=de('<div class="w-full h-full overflow-x-hidden overflow-y-auto"style=scrollbar-gutter:stable><div class="my-4 w-full flex flex-col gap-4 items-center">'),op=de('<div class="max-w-3xl px-8 w-full break-words py-3 rounded-xl"><div class="text-lg font-bold mb-1">'),ap=de("<p class=whitespace-pre-wrap>"),lp=de('<div class="flex flex-row justify-between items-center gap-4"><div class=text-red-500>Error: </div><button class="p-1 my-1 w-8 h-8 flex justify-center items-center border-1 align-start animate-pulse hover:animate-none bg-gray-850 text-gray-400 border-gray-900 disabled:text-gray-600 not-disabled:border-green-400 not-disabled:hover:bg-gray-850/60 not-disabled:hover:text-gray-200 not-disabled:active:border-blue-400 not-disabled:active:bg-gray-850/20 rounded-lg">'),up=de("<button>DEV"),cp=de('<div class="fixed inset-2 z-10 p-2 flex flex-col items-center gap-4 bg-gray-750 rounded-xl"><div class="flex flex-row gap-2"><div>MODEL VARIANT: </div><button class="p-0.5 px-2 bg-gray-700 rounded-lg"></button></div><button class="p-0.5 px-2 bg-gray-700 rounded-lg">Download Markdown</button><button class="p-0.5 px-2 bg-gray-700 rounded-lg">Download JSON</button><button class="mt-8 px-1 py-0.5 bg-blue-400 hover:bg-blue-500 rounded-lg">Back'),hp=de('<div class="flex flex-col w-screen h-screen h-svh bg-gray-800"><div class=h-4></div><div class="fixed flex flex-col gap-4 left-2 top-2 z-1 group"><div class="absolute left-8 inset-y-0 flex flex-row items-center text-sm text-gray-500 opacity-0 group-hover:opacity-100 group-hover:left-12 transition-all duration-200 pointer-events-none">[ESC]</div><button class="relative p-1 bg-gray-750 hover:bg-gray-700 rounded-xl outline-none"></button></div><div><div class="p-4 flex flex-row justify-between text-gray-100"><div class=text-xl>Notizen</div><div><button class="px-1 py-0.5 bg-blue-400 hover:bg-blue-500 rounded-lg">Zurück</button> <span class="text-sm text-gray-400">[ESC]</span></div></div><div class=flex-1><textarea id=notes-textarea class="w-full h-full resize-none p-4 outline-none border-0 bg-gray-800/30"></textarea></div></div><div class="relative flex-1 overflow-hidden"></div><div class="overflow-x-hidden w-full p-4 flex flex-row justify-center items-end gap-2"><div class="max-w-2xl w-full flex flex-col gap-4 items-center"></div><button class="my-1 w-12 h-12 flex justify-center items-center border-1 align-start bg-gray-850 text-gray-400 border-gray-900 disabled:text-gray-600 not-disabled:hover:bg-gray-850/60 not-disabled:hover:text-gray-200 not-disabled:active:border-blue-400 not-disabled:active:bg-gray-850/20 rounded-lg">'),fp=de("<div><div>");function Ep(){const[e,t]=Be(new URLSearchParams(window.location.search).has("debug")),[n,r]=Be(!1),[i,s]=Be(!1),[o,a]=Be(!1);en(()=>new ep(o()));const[l,u]=Be([]),[c,h]=Be(""),d=()=>{const g=l();return g[g.length-1]},f=en(()=>{const g=d();return g&&g.role==="assistant"&&(!g.done()||g.error()!==null)});window.onbeforeunload=()=>{if(l().length>0)return""};let y=!0;const b=(()=>{var g=sp(),_=g.firstChild;return g.addEventListener("scroll",()=>{y=b.scrollHeight-b.scrollTop===b.clientHeight}),oe(_,Q(co,{get each(){return l()},children:k=>(()=>{var E=op(),$=E.firstChild;return oe($,()=>k.role==="user"?"Nutzer":"Assistent"),oe(E,(()=>{var w=uo(()=>k.role==="user");return()=>w()?(()=>{var R=ap();return oe(R,()=>k.content),R})():[Q(Df,{get class(){return"md"+(k.error()?" opacity-50":"")},get children(){return k.content()+(k.done()?k.error()!==null?" ❌":"":" ⬤")}}),Q(En,{get when(){return k.error()!==null},get children(){var R=lp(),N=R.firstChild;N.firstChild;var T=N.nextSibling;return oe(N,()=>k.error(),null),T.$$click=()=>k.retry(),oe(T,Q(np,{})),R}})]})(),null),E})()})),g})();vr(()=>{for(const g of l())g.role==="assistant"&&vr(()=>{g.content(),g.error(),g.done(),y&&(b.scrollTop=b.scrollHeight)})}),document&&document.addEventListener("keydown",g=>{if(g.ctrlKey&&g.shiftKey&&g.key==="I")g.preventDefault(),r(_=>!_);else if(!g.ctrlKey&&/^[a-zA-Z]$/.test(g.key)&&!n()){const _=document.getElementById(i()?"notes-textarea":"chat-input");if(!_)return;_.focus()}else g.key==="Escape"&&(n()?r(!1):s(_=>!_))});const P=async()=>{const g=c();if(g.length===0)return;const _=Date.now();h(""),u([...l(),{time:_,role:"user",content:g}]),fetch("/api/saveMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:g})}).catch(k=>console.warn("Fehler beim Speichern:",k));try{const $=(await(await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:g})})).json()).reply||"Ich konnte leider keine Antwort generieren.";u(w=>[...w,{time:Date.now(),role:"assistant",content:()=>$,done:()=>!0,error:()=>null,retry:()=>{}}])}catch(k){console.error("Fehler bei GPT-Antwort:",k),u(E=>[...E,{time:Date.now(),role:"assistant",content:()=>"",done:()=>!0,error:()=>"Fehler beim Abrufen der Antwort",retry:()=>P()}])}};return(()=>{var g=hp(),_=g.firstChild,k=_.nextSibling,E=k.firstChild,$=E.nextSibling,w=k.nextSibling,R=w.firstChild,N=R.firstChild,T=N.nextSibling,F=T.firstChild,A=w.nextSibling,I=A.nextSibling,H=I.firstChild,J=H.nextSibling;return $.$$click=()=>s(!0),oe($,Q(ip,{})),oe(k,Q(En,{get when(){return e()},get children(){var M=up();return M.$$click=()=>r(!0),M}}),null),oe(g,Q(En,{get when(){return n()},get children(){var M=cp(),ee=M.firstChild,te=ee.firstChild,pe=te.nextSibling,Pe=ee.nextSibling,m=Pe.nextSibling,be=m.nextSibling;return pe.$$click=()=>a(he=>!he),oe(pe,()=>o()?"Prompted":"Base"),Pe.$$click=()=>{const he=l().length===0?new Date:new Date(l()[0].time);let p="# ChatGPT Log "+(o()?"Prompted":"Base")+" "+he.toLocaleString("de-DE")+`

`;for(let G of l())p+="**"+(G.role==="user"?"User":"Assistent")+"**: ("+new Date(G.time).toLocaleString("de-DE")+`)  
`,p+=G.role==="user"?G.content:G.content(),p+=`

---

`;p+=`

# Notes:

`+document.getElementById("notes-textarea").value,ao([p],"text/markdown","Chatbot-Log-"+(o()?"prompted":"base")+"-"+he.getTime()+".md")},m.$$click=()=>{const he=l().length===0?new Date:new Date(l()[0].time);let p=[];for(let G of l())p.push({time:G.time,role:G.role,content:G.role==="user"?G.content:G.content()});p.push({time:0,role:"notes",content:document.getElementById("notes-textarea").value}),ao([JSON.stringify(p)],"application/json","Chatbot-Log-"+(o()?"prompted":"base")+"-"+he.getTime()+".json")},be.$$click=()=>r(!1),M}}),w),F.$$click=()=>s(!1),oe(A,Q(lo,{top:!0}),null),oe(A,b,null),oe(A,Q(lo,{}),null),oe(H,Q(jf,{id:"chat-input",accessor:c,setter:h,onsubmit:P,get disabled(){return f()},color:"#ff00ff",class:"bg-gray-850 rounded-lg outline-none border-0 ring focus-visible:ring-blue-400 ring-gray-900 disabled:text-gray-700 disabled:placeholder:text-gray-700",placeholder:"Schreibe dem Assistenten…"})),J.$$click=P,oe(J,Q(Hf,{})),ut(M=>{var ee=`${i()?"":"invisible"} fixed inset-2 z-5 flex flex-col items-stretch bg-gray-750 rounded-xl`,te=c().length===0||f();return ee!==M.e&&Rt(w,M.e=ee),te!==M.t&&(J.disabled=M.t=te),M},{e:void 0,t:void 0}),g})()}function lo(e){return(()=>{var t=fp(),n=t.firstChild;return ut(r=>{var i=`absolute inset-x-0 ${e.top?"top-0":"bottom-0"} h-8 flex flex-row justify-center`,s=`max-w-3xl w-full mr-10px ${e.top?"bg-gradient-to-b":"bg-gradient-to-t"} from-gray-800 to-transparent`;return i!==r.e&&Rt(t,r.e=i),s!==r.t&&Rt(n,r.t=s),r},{e:void 0,t:void 0}),t})()}fo(["click"]);export{Ep as default};
